<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Xcodeå¸¸è§é—®é¢˜</title>
      <link href="/2021/10/14/Xcode%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>/2021/10/14/Xcode%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="Optimization-Opportunities-The-layer-is-using-dynamic-shadows-which-are-expensive-to-render-If-possible-try-setting-shadowPath-or-pre-rendering-the-shadow-into-an-image-and-putting-it-under-the-layer">Optimization Opportunities: The layer is using dynamic shadows which are expensive to render. If possible try setting shadowPath, or pre-rendering the shadow into an image and putting it under the layer.</h3><blockquote><p>è¿™æ˜¯å› ä¸ºæ²¡æœ‰è®¾ç½®shadowPathå¯¼è‡´äº†ç¦»å±æ¸²æŸ“<br>è§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼š</p></blockquote><ol><li>é€šè¿‡æ˜ç¡®åœ°è®¾ç½®shadowPathæ¥â€œå¼•å¯¼â€é˜´å½±æ¸²æŸ“ï¼Œä¾‹å¦‚</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view.layer.shadowPath <span class="operator">=</span> <span class="type">UIBezierPath</span>(rect: view.bounds).cgPath</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>ç¼“å­˜<code>rasterization</code>(çŠæ ¼åŒ–)</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">view.layer.shouldRasterize <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">view.layer.rasterizationScale <span class="operator">=</span> <span class="type">UIScreen</span>.main.scale</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> dev </category>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
            <tag> Xcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS å”¤èµ·APPä¹‹Universal Link(é€šç”¨é“¾æ¥)</title>
      <link href="/2021/10/13/iOS%20%E5%94%A4%E8%B5%B7APP%E4%B9%8BUniversal%20Link(%E9%80%9A%E7%94%A8%E9%93%BE%E6%8E%A5)/"/>
      <url>/2021/10/13/iOS%20%E5%94%A4%E8%B5%B7APP%E4%B9%8BUniversal%20Link(%E9%80%9A%E7%94%A8%E9%93%BE%E6%8E%A5)/</url>
      
        <content type="html"><![CDATA[<h4 id="ä»€ä¹ˆæ˜¯Universal-Link-é€šç”¨é“¾æ¥">ä»€ä¹ˆæ˜¯<code>Universal Link</code>(é€šç”¨é“¾æ¥)</h4><p><code>Universal Link</code>(é€šç”¨é“¾æ¥)æ˜¯Appleåœ¨iOS9æ¨å‡ºçš„ä¸€ç§èƒ½å¤Ÿæ–¹ä¾¿çš„é€šè¿‡ä¼ ç»Ÿ<code>HTTPS</code>é“¾æ¥æ¥å¯åŠ¨APPçš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç½‘å€æ‰“å¼€ç½‘å€å’ŒAPPã€‚å½“ä½ çš„åº”ç”¨æ”¯æŒ<code>Universal Link</code>(é€šç”¨é“¾æ¥)ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æ˜¯å¯ä»¥è·³è½¬åˆ°ä½ çš„ç½‘ç«™å¹¶è·å¾—æ— ç¼é‡å®šå‘åˆ°å¯¹åº”çš„APPï¼Œä¸”ä¸éœ€è¦é€šè¿‡<code>Safari</code>æµè§ˆå™¨ã€‚å¦‚æœä½ çš„åº”ç”¨ä¸æ”¯æŒçš„è¯ï¼Œåˆ™ä¼šåœ¨<code>Safari</code>ä¸­æ‰“å¼€è¯¥é“¾æ¥ã€‚åœ¨è‹¹æœå¼€å‘è€…ä¸­å¯ä»¥çœ‹åˆ°å¯¹å®ƒçš„ä»‹ç»æ˜¯ï¼š</p><blockquote><p>Seamlessly link to content inside your app, or on your website in iOS 9 or later. With universal links, you can always give users the most integrated mobile experience, even when your app isnâ€™t installed on their device.</p></blockquote><h4 id="å¦‚ä½•ç†è§£Universal-Link-é€šç”¨é“¾æ¥">å¦‚ä½•ç†è§£<code>Universal Link</code>(é€šç”¨é“¾æ¥)</h4><p><code>Universal Link</code>(é€šç”¨é“¾æ¥)ï¼šçœ‹èµ·æ¥å°±æ˜¯ä¸€æ¡æ™®é€šçš„<code>https</code>é“¾æ¥ï¼Œå½“ç„¶æ˜¯æˆ‘ä»¬åœ¨è¯¥é“¾æ¥åŸŸåæ ¹ç›®å½•é…ç½®è¿‡çš„ä¸€ä¸ªé“¾æ¥ï¼Œä¹Ÿå¯ä»¥åœ¨è¯¥é“¾æ¥ä¸­æ”¾ç½®å¯¹åº”çš„H5é¡µé¢ã€‚å½“ç”¨æˆ·çš„ç‚¹å‡»è¯¥é“¾æ¥ï¼Œåªè¦æ‰‹æœºä¸­å®‰è£…äº†æ”¯æŒè¯¥é“¾æ¥çš„APPå°±ä¼šç›´æ¥è¿›å…¥åˆ°APPä¸­ã€‚å¦‚æœæ²¡æœ‰å®‰è£…APPåˆ™ä¼šè·³è½¬åˆ°<code>Safari</code>æµè§ˆå™¨ä¸­ï¼Œå±•ç¤ºH5é¡µé¢ã€‚å¯¹ç”¨æˆ·æ¥è¯´åˆ™æ˜¯ä¸€ä¸ªæ— ç¼è·³è½¬çš„è¿‡ç¨‹ã€‚</p><h4 id="Universal-Link-é€šç”¨é“¾æ¥-çš„åº”ç”¨åœºæ™¯"><code>Universal Link</code>(é€šç”¨é“¾æ¥)çš„åº”ç”¨åœºæ™¯</h4><p>ä½¿ç”¨<code>Universal Link</code>(é€šç”¨é“¾æ¥)å¯ä»¥è®©ç”¨æˆ·åœ¨<code>Safari</code>æµè§ˆå™¨æˆ–è€…å…¶ä»–APPçš„<code>webview</code>ä¸­æ‹‰èµ·ç›¸åº”çš„APPï¼Œä¹Ÿå¯ä»¥åœ¨APPä¸­ä½¿ç”¨ç›¸åº”çš„åŠŸèƒ½ï¼Œä»è€Œæ¥æŠŠç”¨æˆ·å¼•æµåˆ°APPä¸­ã€‚æ¯”å¦‚æ·˜å®å½“åœ¨<code>Safari</code>æµè§ˆå™¨ä¸­è¿›å…¥æ·˜å®ç½‘é¡µç‚¹å‡»æ‰“å¼€APPåˆ™ä¼šä½¿ç”¨<code>Universal Link</code>(é€šç”¨é“¾æ¥)æ¥æ‹‰èµ·æ·˜å®APPã€‚</p><h4 id="ä½¿ç”¨Universal-Link-é€šç”¨é“¾æ¥-è·³è½¬çš„å¥½å¤„">ä½¿ç”¨<code>Universal Link</code>(é€šç”¨é“¾æ¥)è·³è½¬çš„å¥½å¤„</h4><ul><li><strong>å”¯ä¸€æ€§</strong>: ä¸åƒè‡ªå®šä¹‰çš„<code>URL Scheme</code>ï¼Œå› ä¸ºå®ƒä½¿ç”¨æ ‡å‡†çš„<code>HTTPS</code>åè®®é“¾æ¥åˆ°ä½ çš„webç«™ç‚¹ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šè¢«å…¶å®ƒçš„APPæ‰€å£°æ˜ã€‚å¦å¤–ï¼Œ<code>URL scheme</code>å› ä¸ºæ˜¯è‡ªå®šä¹‰çš„åè®®ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰å®‰è£… app çš„æƒ…å†µä¸‹æ˜¯æ— æ³•ç›´æ¥æ‰“å¼€çš„(åœ¨<code>Safari</code>ä¸­è¿˜ä¼šå‡ºç°ä¸€ä¸ªä¸å¯æ‰“å¼€çš„å¼¹çª—)ï¼Œè€Œ<code>Universal Link</code>(é€šç”¨é“¾æ¥)æœ¬èº«æ˜¯ä¸€ä¸ª<code>HTTPS</code>é“¾æ¥ï¼Œæ‰€ä»¥æœ‰æ›´å¥½çš„å…¼å®¹æ€§ï¼›</li><li><strong>å®‰å…¨</strong>:å½“ç”¨æˆ·çš„æ‰‹æœºä¸Šå®‰è£…äº†ä½ çš„APPï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå»ä½ é…ç½®çš„ç½‘ç«™ä¸Šå»ä¸‹è½½ä½ ä¸Šä¼ ä¸Šå»çš„è¯´æ˜æ–‡ä»¶(è¿™ä¸ªè¯´æ˜æ–‡ä»¶å£°æ˜äº†å½“å‰è¯¥<code>HTTPS</code>é“¾æ¥å¯ä»¥æ‰“å¼€é‚£äº›APP)ã€‚å› ä¸ºåªæœ‰ä½ è‡ªå·±æ‰èƒ½ä¸Šä¼ æ–‡ä»¶åˆ°ä½ ç½‘ç«™çš„æ ¹ç›®å½•ï¼Œæ‰€ä»¥ä½ çš„ç½‘ç«™å’Œä½ çš„APPä¹‹é—´çš„å…³è”æ˜¯å®‰å…¨çš„ï¼›</li><li><strong>å¯å˜</strong>:å½“ç”¨æˆ·æ‰‹æœºä¸Šæ²¡æœ‰å®‰è£…ä½ çš„APPçš„æ—¶å€™ï¼Œ<code>Universal Link</code>(é€šç”¨é“¾æ¥)ä¹Ÿèƒ½å¤Ÿå·¥ä½œã€‚å¦‚æœä½ æ„¿æ„ï¼Œåœ¨æ²¡æœ‰å®‰è£…ä½ çš„appçš„æ—¶å€™ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œä¼šåœ¨safariä¸­å±•ç¤ºä½ ç½‘ç«™çš„å†…å®¹ï¼›</li><li><strong>ç®€å•</strong>:ä¸€ä¸ª<code>HTTPS</code>çš„é“¾æ¥ï¼Œå¯ä»¥åŒæ—¶ä½œç”¨äºç½‘ç«™å’ŒAPPï¼›</li><li><strong>ç§æœ‰</strong>: å…¶å®ƒAPPå¯ä»¥åœ¨ä¸éœ€è¦çŸ¥é“ä½ çš„APPæ˜¯å¦å®‰è£…äº†çš„æƒ…å†µä¸‹å’Œä½ çš„APPç›¸äº’é€šä¿¡ã€‚</li></ul><h4 id="æ”¯æŒUniversal-Link-é€šç”¨é“¾æ¥">æ”¯æŒ<code>Universal Link</code>(é€šç”¨é“¾æ¥)</h4><ol><li><p>å…ˆå†³æ¡ä»¶:å¿…é¡»æœ‰ä¸€ä¸ªæ”¯æŒ<code>HTTPS</code>çš„åŸŸåï¼Œå¹¶ä¸”æ‹¥æœ‰è¯¥åŸŸåä¸‹çš„ä¸Šä¼ åˆ°æ ¹ç›®å½•çš„æƒé™ï¼ˆä¸ºäº†ä¸Šä¼ AppleæŒ‡å®šæ–‡ä»¶ï¼‰ã€‚</p></li><li><p>å¼€å‘è€…ä¸­å¿ƒé…ç½®ï¼šæ‰¾åˆ°å¯¹åº”çš„App IDï¼Œåœ¨Application Servicesåˆ—è¡¨é‡Œæœ‰Associated Domainsä¸€æ¡ï¼ŒæŠŠå®ƒå˜ä¸ºEnabledå°±å¯ä»¥äº†ã€‚</p><p>é…ç½®App IDæ”¯æŒAssociated Domains:</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/webp" alt="img"></p><ol start="3"><li>å·¥ç¨‹é…ç½®ï¼š</li></ol><ul><li><strong>Xcode 11.0ç‰ˆæœ¬</strong><br>å·¥ç¨‹é…ç½®ä¸­ç›¸åº”åŠŸèƒ½ï¼štargets-&gt;Signing&amp;Capabilites-&gt;Capability-&gt;Associated Domainsï¼Œåœ¨å…¶ä¸­çš„Domainsä¸­å¡«å…¥ä½ æƒ³æ”¯æŒçš„åŸŸåï¼Œä¹Ÿå¿…é¡»å¿…é¡»ä»¥applinks:ä¸ºå‰ç¼€ã€‚<br>å…·ä½“æ­¥éª¤å¦‚ä¸‹å›¾:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/webp-20211013171513005" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/webp-20211013171528844" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/webp-20211013171552313" alt="img"></p><ul><li>Xcode 11.0ä»¥ä¸‹ç‰ˆæœ¬<br>å·¥ç¨‹é…ç½®ä¸­ç›¸åº”åŠŸèƒ½ï¼štargets-&gt;Capabilites-&gt;Associated Domainsï¼Œåœ¨å…¶ä¸­çš„Domainsä¸­å¡«å…¥ä½ æƒ³æ”¯æŒçš„åŸŸåï¼Œå¿…é¡»ä»¥applinks:ä¸ºå‰ç¼€ã€‚<br>é…ç½®é¡¹ç›®ä¸­çš„Associated Domains:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/webp-20211013171638966" alt="img"></p><ol start="4"><li>é…ç½®æŒ‡å®šæ–‡ä»¶ï¼šåˆ›å»ºä¸€ä¸ªå†…å®¹ä¸ºjsonæ ¼å¼çš„æ–‡ä»¶ï¼Œè‹¹æœå°†ä¼šåœ¨åˆé€‚çš„æ—¶å€™ï¼Œä»æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¡«å…¥çš„åŸŸåè¯·æ±‚è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åå¿…é¡»ä¸ºapple-app-site-associationï¼Œ<strong>åˆ‡è®°æ²¡æœ‰åç¼€å</strong>ï¼Œæ–‡ä»¶å†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·å­ï¼š</li></ol><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"applinks"</span>: {</span><br><span class="line">        <span class="attr">"apps"</span>: [],</span><br><span class="line">        <span class="attr">"details"</span>: [</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">"appID"</span>: <span class="string">"9JA89QQLNQ.com.apple.wwdc"</span>,</span><br><span class="line">                <span class="attr">"paths"</span>: [ <span class="string">"/wwdc/news/"</span>, <span class="string">"/videos/wwdc/2015/*"</span>]</span><br><span class="line">            },</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">"appID"</span>: <span class="string">"ABCD1234.com.apple.wwdc"</span>,</span><br><span class="line">                <span class="attr">"paths"</span>: [ <span class="string">"*"</span> ]</span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¯´æ˜ï¼š</p><blockquote><p>appIDï¼šç»„æˆæ–¹å¼æ˜¯ <code>teamId.yourappâ€™s bundle identifier</code>ã€‚å¦‚ä¸Šé¢çš„ 9JA89QQLNQå°±æ˜¯teamIdã€‚ç™»é™†å¼€å‘è€…ä¸­å¿ƒï¼Œåœ¨Account -&gt; Membershipé‡Œé¢å¯ä»¥æ‰¾åˆ°Team IDã€‚</p></blockquote><blockquote><p>pathsï¼šè®¾å®šä½ çš„appæ”¯æŒçš„è·¯å¾„åˆ—è¡¨ï¼Œåªæœ‰è¿™äº›æŒ‡å®šçš„è·¯å¾„çš„é“¾æ¥ï¼Œæ‰èƒ½è¢«appæ‰€å¤„ç†ã€‚æ˜Ÿå·çš„å†™æ³•ä»£è¡¨äº†å¯è¯† åˆ«åŸŸåä¸‹æ‰€æœ‰é“¾æ¥ã€‚</p></blockquote><ol start="5"><li>ä¸Šä¼ æŒ‡å®šæ–‡ä»¶:ä¸Šä¼ è¯¥æ–‡ä»¶åˆ°ä½ çš„åŸŸåæ‰€å¯¹åº”çš„<code>æ ¹ç›®å½•</code>æˆ–è€…<code>.well-knownç›®å½•</code>ï¼ˆâš ï¸iOS 10 ä»¥åéœ€è¦æ”¾åœ¨è¯¥ç›®å½•ä¸‹æ‰ç”Ÿæ•ˆï¼‰ä¸‹ï¼Œè¿™æ˜¯ä¸ºäº†è‹¹æœèƒ½è·å–åˆ°ä½ ä¸Šä¼ çš„æ–‡ä»¶ã€‚ä¸Šä¼ å®Œå,è‡ªå·±å…ˆè®¿é—®ä¸€ä¸‹,çœ‹çœ‹æ˜¯å¦èƒ½å¤Ÿè·å–åˆ°ï¼Œå½“ä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è¿™ä¸ªæ–‡ä»¶é“¾æ¥åï¼Œåº”è¯¥æ˜¯ç›´æ¥ä¸‹è½½apple-app-site-associationæ–‡ä»¶ã€‚</li></ol><h4 id="Universal-Link-é€šç”¨é“¾æ¥-ç›¸å…³éªŒè¯"><code>Universal Link</code>(é€šç”¨é“¾æ¥)ç›¸å…³éªŒè¯</h4><p>åœ¨iOSè®¾å¤‡ä¸­çš„å¤‡å¿˜å½•ä¸­è¾“å…¥APPèƒ½è¯†åˆ«çš„é“¾æ¥ï¼Œç„¶åç›´æ¥ç‚¹å‡»æ­¤é“¾æ¥ï¼Œå°±ä¼šç›´æ¥è·³è½¬åˆ°ä½ çš„appäº†ã€‚æˆ–æ˜¯é•¿æŒ‰ï¼Œåœ¨å‡ºç°çš„å¼¹å‡ºèœå•ä¸­ç¬¬äºŒé¡¹æ˜¯åœ¨â€™XXXâ€™ä¸­æ‰“å¼€ï¼Œè¿™ä¹Ÿä»£è¡¨ç€æˆåŠŸï¼š</p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/webp-20211013173320186" alt="img" style="zoom:33%;"><p>æˆ–æ˜¯ä½ å°†è¦æµ‹è¯•çš„ç½‘å€åœ¨<code>Safari</code>ä¸­æ‰“å¼€ï¼Œåœ¨å‡ºç°çš„ç½‘é¡µä¸Šæ–¹ä¸‹æ»‘ï¼Œå¯ä»¥çœ‹åˆ°æœ‰åœ¨â€XXâ€åº”ç”¨ä¸­æ‰“å¼€ï¼š</p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/webp-20211013173329786" alt="img" style="zoom: 33%;"><p>å½“ç‚¹å‡»æŸä¸ªé“¾æ¥ï¼Œç›´æ¥å¯ä»¥è¿›æˆ‘ä»¬çš„appäº†ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç›®çš„æ˜¯è¦èƒ½å¤Ÿè·å–åˆ°ç”¨æˆ·è¿›æ¥çš„é“¾æ¥ï¼Œæ ¹æ®é“¾æ¥æ¥å±•ç¤ºç»™ç”¨æˆ·ç›¸åº”çš„å†…å®¹ã€‚<br>æˆ‘ä»¬éœ€è¦åœ¨å·¥ç¨‹é‡Œçš„å®ç°<code>AppDelegate</code>é‡Œå¯¹åº”çš„æ–¹æ³•ï¼š</p><figure class="highlight objectivec"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application continueUserActivity:(<span class="built_in">NSUserActivity</span> *)userActivity restorationHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSArray</span> * _Nullable))restorationHandler {</span><br><span class="line">    <span class="keyword">if</span> ([userActivity.activityType isEqualToString:<span class="built_in">NSUserActivityTypeBrowsingWeb</span>])</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">NSURL</span> *webpageURL = userActivity.webpageURL;</span><br><span class="line">        <span class="keyword">if</span> (urlæ˜¯æˆ‘ä»¬å¸Œæœ›å¤„ç†çš„)</span><br><span class="line">        {</span><br><span class="line">            <span class="comment">//è¿›è¡Œæˆ‘ä»¬çš„å¤„ç†</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            [[<span class="built_in">UIApplication</span> sharedApplication] openURL:url];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// swift</span></span><br><span class="line">func application(_ application: <span class="built_in">UIApplication</span>, <span class="keyword">continue</span> userActivity: <span class="built_in">NSUserActivity</span>, restorationHandler: @escaping ([<span class="built_in">UIUserActivityRestoring</span>]?) -&gt; Void) -&gt; Bool {</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯ä»Universal Linksè¿›æ¥çš„é“¾æ¥</span></span><br><span class="line">    <span class="keyword">if</span> userActivity.activityType == <span class="built_in">NSUserActivityTypeBrowsingWeb</span>,</span><br><span class="line">        let webpageURL = userActivity.webpageURL {</span><br><span class="line">        print( <span class="string">"ç‚¹å‡»çš„é“¾æ¥æ˜¯ï¼š\(webpageURL)"</span>)</span><br><span class="line">      }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è‹¹æœä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ï¼Œæä¾›äº†ä¸€ä¸ª<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fsearch.developer.apple.com%2Fappsearch-validation-tool%2F">ç½‘é¡µæ¥éªŒè¯</a>æˆ‘ä»¬ç¼–å†™çš„è¿™ä¸ªapple-app-site-associationæ˜¯å¦åˆæ³•æœ‰æ•ˆï¼Œè¿›å…¥éªŒè¯ç½‘å€è¿›è¡ŒéªŒè¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/webp-20211013172219516" alt="img"></p><p><strong>æ³¨æ„</strong></p><ul><li>å‰ç«¯å¼€å‘ç»å¸¸é¢ä¸´è·¨åŸŸé—®é¢˜ï¼Œå¿…é¡»è¦æ±‚è·¨åŸŸï¼Œå¦‚æœä¸è·¨åŸŸï¼Œå°±ä¸è¡Œã€‚</li><li>åªæœ‰å½“å‰<code>webview</code>çš„<code>URL</code>åŸŸåï¼Œä¸è·³è½¬ç›®æ ‡<code>URL</code>åŸŸåä¸ä¸€è‡´æ—¶ï¼Œ<code>Universal Link</code>(é€šç”¨é“¾æ¥)æ‰ç”Ÿæ•ˆã€‚</li></ul><blockquote><p>è¯¥æ–‡ç« è½¬è½½è‡ªç®€ä¹¦<a href="https://www.jianshu.com/u/b09c13696e1c">CodeRookie</a> iOS å”¤èµ·APPä¹‹Universal Link(é€šç”¨é“¾æ¥)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> dev </category>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>setContentHuggingPriorityå’ŒsetContentCompressionResistancePriorityçš„ä½¿ç”¨</title>
      <link href="/2021/10/13/setContentHuggingPriority%E5%92%8CsetContentCompressionResistancePriority%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2021/10/13/setContentHuggingPriority%E5%92%8CsetContentCompressionResistancePriority%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>å½“ä¸¤ä¸ªUILabelå¹¶æ’æ˜¾ç¤ºæ—¶ï¼Œå¦‚ä½•è®¾ç½®çº¦æŸï¼Œè®© leftLB å’Œ rightLB æ­£å¸¸æ˜¾ç¤ºå°±å¾ˆé‡è¦äº†ã€‚</p><h3 id="æ–¹æ¡ˆ1-å·¦å³ä¸¤ä¸ªLabelçš„å®½åº¦ç›¸åŒï¼Œåˆ™çº¦æŸè®¾ç½®å¦‚ä¸‹ï¼š">æ–¹æ¡ˆ1: å·¦å³ä¸¤ä¸ªLabelçš„å®½åº¦ç›¸åŒï¼Œåˆ™çº¦æŸè®¾ç½®å¦‚ä¸‹ï¼š</h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ æ ‡é¢˜çº¦æŸ,å·¦è¾¹çš„label</span></span><br><span class="line">leftLb.snp.makeConstraints { make <span class="keyword">in</span></span><br><span class="line">    make.leading.equalTo(<span class="number">16</span>)</span><br><span class="line">    make.centerY.equalToSuperview()</span><br><span class="line">    make.trailing.equalTo(rightLb.snp.leading).offset(<span class="number">8</span>)</span><br><span class="line">    make.width.equalTo(rightLb)</span><br><span class="line">}</span><br><span class="line"><span class="comment">// æ·»åŠ å†…å®¹çº¦æŸ,å³è¾¹çš„label</span></span><br><span class="line">rightLb.snp.makeConstraints { make <span class="keyword">in</span></span><br><span class="line">    make.trailing.equalTo(<span class="operator">-</span><span class="number">16</span>)</span><br><span class="line">    make.centerY.equalToSuperview()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="æ–¹æ¡ˆ2-å·¦å³ä¸¤ä¸ªLabelçš„å®½åº¦ä¸ç›¸ç­‰ï¼Œæ­¤æ—¶éœ€è¦æ ¹æ®è®¾ç½®-setContentHuggingPriority-å’Œ-setContentCompressionResistancePriority-æ¥æ§åˆ¶å“ªè¾¹çš„labelæ‹‰ä¼¸ï¼Œå“ªè¾¹çš„labelæ”¶ç¼©ã€‚">æ–¹æ¡ˆ2: å·¦å³ä¸¤ä¸ªLabelçš„å®½åº¦ä¸ç›¸ç­‰ï¼Œæ­¤æ—¶éœ€è¦æ ¹æ®è®¾ç½® <code>setContentHuggingPriority</code> å’Œ <code>setContentCompressionResistancePriority</code> æ¥æ§åˆ¶å“ªè¾¹çš„labelæ‹‰ä¼¸ï¼Œå“ªè¾¹çš„labelæ”¶ç¼©ã€‚</h3><ul><li><code>setContentHuggingPriority</code> è¡¨ç¤ºå½“å‰çš„Labelçš„å†…å®¹ä¸æƒ³è¢«æ‹‰ä¼¸</li><li><code>setContentCompressionResistancePriority</code> è¡¨ç¤ºå½“å‰çš„Labelçš„å†…å®¹ä¸æƒ³è¢«æ”¶ç¼©</li></ul><blockquote><p>é»˜è®¤æƒ…å†µä¸‹: HuggingPriority == 250,  CompressionResistancePriority == 750</p></blockquote><p>éœ€è¦è€ƒè™‘2ç§æƒ…å†µï¼Œå·¦å³2è¾¹æ•°æ®å‡ä¸è¶³çš„æ—¶å€™ï¼Œè°æ‹‰ä¼¸ï¼Ÿå·¦å³2è¾¹æ•°æ®å‡å……è¶³çš„æ—¶å€™ï¼Œè°æ”¶ç¼©ï¼Ÿ</p><p>é¦–å…ˆè§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå·¦å³2è¾¹æ•°æ®å‡ä¸è¶³çš„æ—¶å€™ï¼Œè°æ‹‰ä¼¸ï¼Œè¿™ä¸ªç”± <code>HuggingPriority</code> æ§åˆ¶ã€‚</p><ul><li>å¦‚æœæƒ³è®©å·¦è¾¹çš„å†…å®¹æ‹‰ä¼¸ï¼Œå°±è®¾ç½®å·¦è¾¹çš„æ•°å€¼&lt;250ï¼ˆæˆ–è®©å³è¾¹çš„&gt;250ï¼‰ï¼›</li><li>å¦‚æœæƒ³è®©å³è¾¹çš„å†…å®¹æ‹‰ä¼¸ï¼Œå°±è®¾ç½®å³è¾¹çš„æ•°å€¼&lt;250 (æˆ–è®©å·¦è¾¹çš„&gt;250)ã€‚</li></ul><blockquote><p>å·¦å³ä¸¤ä¸ªLabelå¯¹æ¯”ï¼Œæ•°å€¼è¶Šå¤§ï¼Œè¶Šä¸æƒ³è¢«æ‹‰ä¼¸ï¼Œç»“æœä¹Ÿä¸ä¼šè¢«æ‹‰ä¼¸ï¼›æ•°å€¼è¶Šå°ï¼Œè¶Šå®¹æ˜“è¢«æ‹‰ä¼¸ã€‚</p></blockquote><p>ç„¶åè§£å†³ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå·¦å³2è¾¹æ•°æ®éƒ½å……è¶³çš„æ—¶å€™ï¼Œè°æ”¶ç¼©ï¼Œè¿™ä¸ªç”± <code>ContentCompressionResistancePriority</code> æ§åˆ¶ã€‚</p><ul><li>å¦‚æœæƒ³è®©å·¦è¾¹çš„å†…å®¹æ”¶ç¼©ï¼Œå°±è®¾ç½®å·¦è¾¹çš„æ•°å€¼&lt;750ï¼ˆæˆ–è®©å³è¾¹çš„&gt;750ï¼‰;</li><li>å¦‚æœæƒ³è®©å³è¾¹çš„å†…å®¹æ”¶ç¼©ï¼Œå°±è®¾ç½®å³è¾¹çš„æ•°å€¼&lt;750ï¼ˆæˆ–è®©å·¦è¾¹çš„&gt;750ï¼‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> dev </category>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iris-goåå°æ¨¡ç‰ˆ</title>
      <link href="/2021/10/09/iris-go%E5%90%8E%E5%8F%B0%E6%A8%A1%E7%89%88/"/>
      <url>/2021/10/09/iris-go%E5%90%8E%E5%8F%B0%E6%A8%A1%E7%89%88/</url>
      
        <content type="html"><![CDATA[<h2 id="åº">åº</h2><p>æœ¬æ–‡æ˜¯åŸºäº<a href="https://github.com/kataras/iris">iris 12</a> æ‰©å±•ç¼–å†™çš„ç±»ä¼¼<a href="https://eggjs.org/zh-cn/intro/">eggjs</a>æ¡†æ¶ç»“æ„ã€‚è¿™é‡Œå°±ç®€å•ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯irisï¼Œirisä¸»è¦ä¾§é‡äºWebå¼€å‘ï¼Œæä¾›äº†Webå¼€å‘çš„ä¸€ç³»åˆ—åŠŸèƒ½ç»„ä»¶ï¼ŒåŸºäºMVCå¼€å‘æ¨¡å¼ã€‚<em><strong>å¦‚æœä½ æƒ³ç›´æ¥å¼€å§‹ï¼Œè¯·ç‚¹å‡»<a href="https://github.com/jeromexiong/stencil-go">stencil-go</a>ã€‚</strong></em></p><p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/20211009111105.png" alt=""></p><p>å› ä¸ºæˆ‘æœ¬äººä¹‹å‰å†™nodejsæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥åœ¨å­¦ä¹ goçš„æ—¶å€™å°±æ‰¾åˆ°irisè¿™ä¸ªæ¡†æ¶ï¼Œæ¯•ç«Ÿå®ƒçš„å…³äºé‡Œé¢å°±æœ‰ä¸€å¥<code>A true successor of expressjs and laravel</code>ğŸ˜„ã€‚æœ‰äº†æ¡†æ¶ä¹‹åå°±å¾—çº¦æŸä¸€ä¸‹ç»“æ„ä¸æ˜¯ï¼Œä¸ç„¶å¤§å®¶éƒ½éšå¿ƒæ‰€æ¬²çš„å†™å°±å¾ˆæ··ä¹±äº†ï¼Œæ‰€ä»¥æˆ‘å°±å‚ç…§äº†eggjsçš„ç»“æ„è¿›è¡Œè®¾è®¡ã€‚ï¼ˆå½“ç„¶è¿™åªæ˜¯æˆ‘ä¸ªäººçš„æƒ³æ³•ï¼Œæ¯•ç«Ÿè¿™ä¹Ÿæ‰æ˜¯æˆ‘çš„å…¥é—¨é¡¹ç›®ï¼Œå¤šæœ‰ä¸è¶³ï¼Œè¿˜è¯·æŒ‡æ•™( Â´â–½ï½€)</p><h2 id="åŸºç¡€åŠŸèƒ½">åŸºç¡€åŠŸèƒ½</h2><h3 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h3><p>è¿™é‡Œå°±ç®€å•ä»‹ç»ä¸‹ç›®å½•çº¦å®šè§„èŒƒ</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">stencil-go</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ app</span><br><span class="line">â”‚   â”œâ”€â”€ bindata</span><br><span class="line">â”‚   â”œâ”€â”€ controller</span><br><span class="line">â”‚   â”œâ”€â”€ core</span><br><span class="line">â”‚   â”œâ”€â”€ extendï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ middlewareï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ model</span><br><span class="line">â”‚   â”œâ”€â”€ router</span><br><span class="line">â”‚   â””â”€â”€ serviceï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”œâ”€â”€ build_linux.sh</span><br><span class="line">â”œâ”€â”€ build_win64.bat</span><br><span class="line">â”œâ”€â”€ config</span><br><span class="line">â”‚   â”œâ”€â”€ config.default.yaml</span><br><span class="line">â”‚   â””â”€â”€ config.prod.yaml</span><br><span class="line">â”œâ”€â”€ config.ymlï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”œâ”€â”€ go.mod</span><br><span class="line">â”œâ”€â”€ main.go</span><br><span class="line">â”œâ”€â”€ output</span><br><span class="line">â”‚   â”œâ”€â”€ logs ï¼ˆæ—¥å¿—ç›®å½•ï¼‰</span><br><span class="line">â”‚   â””â”€â”€ stencil-go (å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶)</span><br><span class="line">â””â”€â”€ publicï¼ˆå¯é€‰ï¼‰</span><br><span class="line">    â”œâ”€â”€ css</span><br><span class="line">    â”œâ”€â”€ index.html</span><br><span class="line">    â””â”€â”€ js</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ul><li><code>app/bindata/**</code> ç”¨äºæ‰“åŒ…é…ç½®æ–‡ä»¶ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…·ä½“å‚è§<a href="https://github.com/jteeuwen/go-bindata">bindata</a></li><li><code>app/controller/**</code> ç”¨äºè§£æç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†åè¿”å›ç›¸åº”çš„ç»“æœ</li><li><code>app/core/**</code> ç”¨äºè§£æå„ç§éå¸¸ä½†åˆå¿…é¡»çš„æ–¹æ³•ï¼Œä¾‹å¦‚è¯»å–é…ç½®ã€åˆå§‹åŒ–æ—¥å¿—ç­‰</li><li><code>app/extend/**</code> ç”¨äºæ¡†æ¶çš„æ‰©å±•ï¼Œå¯é€‰</li><li><code>app/middleware/**</code> ç”¨äºç¼–å†™ä¸­é—´ä»¶ï¼Œå¯é€‰</li><li><code>app/model/**</code> ç”¨äºç¼–å†™æ¨¡å‹æ–‡ä»¶</li><li><code>app/router/**</code> ç”¨äºé…ç½® URL è·¯ç”±è§„åˆ™</li><li><code>app/service/**</code> ç”¨äºç¼–å†™ä¸šåŠ¡é€»è¾‘å±‚ï¼Œå¯é€‰ï¼Œå»ºè®®ä½¿ç”¨</li><li><code>build_*</code> ç”±äºæ„å»ºå¯¹åº”å¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶</li><li><code>config/config.{env}.js</code> ç”¨äºç¼–å†™é…ç½®æ–‡ä»¶</li><li><code>config.yml</code> mysqlæ•°æ®åº“è½¬ struct å·¥å…·ï¼Œå¯é€‰ ï¼ˆ <a href="https://github.com/xxjwxc/gormt/blob/master/README_zh_cn.md">gormt</a>é…ç½®æ–‡ä»¶</li><li><code>main.go</code> å…¥å£æ–‡ä»¶ï¼Œç”¨äºåŠ è½½é…ç½®å¹¶å¯åŠ¨æœåŠ¡</li><li><code>public/**</code> ç”¨äºæ”¾ç½®é™æ€èµ„æºï¼Œå¯é€‰</li><li><code>output/**</code> ç”¨äºæ”¾ç½®æ—¥å¿—ç­‰ç”Ÿæˆçš„æ–‡ä»¶</li></ul><h2 id="go-æŒ‡ä»¤">go æŒ‡ä»¤</h2><h3 id="æ¸…é™¤æ¨¡å—ç¼“å­˜-GOPATH-pkg-mod">æ¸…é™¤æ¨¡å—ç¼“å­˜<code>$GOPATH/pkg/mod</code></h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go clean --modcache</span><br></pre></td></tr></tbody></table></figure><h3 id="å®‰è£…æ‰“åŒ…å™¨-go-bindata">å®‰è£…æ‰“åŒ…å™¨ <a href="https://github.com/jteeuwen/go-bindata">go-bindata</a></h3><blockquote><p>go-bindata -pkg &lt;æŒ‡å®šåŒ…å&gt; -o &lt;ç›®æ ‡è¾“å‡ºæ–‡ä»¶,å¯åŒ…å«è·¯å¾„&gt; &lt;æºæ–‡ä»¶,å¯åŒ…å«è·¯å¾„&gt;</p></blockquote><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/go-bindata/go-bindata/v3/go-bindata</span><br><span class="line">go-bindata -h</span><br></pre></td></tr></tbody></table></figure><p><code>go-bindata</code>å¦‚æœä¸åœ¨ç¯å¢ƒå˜é‡ä¸­éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚åœ¨<code>~/.bash_profile</code>ä¸­æ·»åŠ ä»¥ä¸‹è¡Œ:</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># golang</span></span></span><br><span class="line">export PATH=~/go/bin:$PATH</span><br></pre></td></tr></tbody></table></figure><h3 id="mysqlæ•°æ®åº“è½¬-struct-å·¥å…·-gormt">mysqlæ•°æ®åº“è½¬ struct å·¥å…· <a href="https://github.com/xxjwxc/gormt/blob/master/README_zh_cn.md">gormt</a></h3><p>éœ€è¦ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„<code>config.yml</code></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">go get -u -v github.com/xxjwxc/gormt@master</span><br><span class="line">gormt -h</span><br><span class="line">gormt</span><br></pre></td></tr></tbody></table></figure><p>âš ï¸ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéœ€è¦è¿è¡Œæ‰“åŒ…å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go-bindata -pkg config_data -o app/bindata/config/config_data.go config/...</span><br></pre></td></tr></tbody></table></figure><h3 id="æœ¬åœ°httpsæµ‹è¯•-mkcert">æœ¬åœ°<code>https</code>æµ‹è¯• <a href="https://github.com/FiloSottile/mkcert">mkcert</a></h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkcert -install</span><br><span class="line">mkcert local.cn "*.local.cn" localhost 127.0.0.1 ::1</span><br></pre></td></tr></tbody></table></figure><h2 id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</h2><h3 id="go-updates-to-go-mod-needed-disabled-by-mod-readonly-packages-Load-error">go: updates to go.mod needed, disabled by -mod=readonly : packages.Load error</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod tidy</span><br></pre></td></tr></tbody></table></figure><h2 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://www.iris-go.com/docs/#/?id=installation">iris-go æ–‡æ¡£</a> å®˜æ–¹æ–‡æ¡£</li><li><a href="https://docs.iris-go.com/iris/getting-started/installation">iris-go æ–‡æ¡£</a> å®˜æ–¹æ–‡æ¡£2</li><li><a href="https://www.kancloud.cn/terry/iris/1683304">iris12 æ–‡æ¡£</a> ä¸‰æ–¹ä¸­æ–‡æ–‡æ¡£</li><li><a href="http://www.topgoer.com/">goè¯­è¨€ä»‹ç»</a>  ä¸‰æ–¹ä¸­æ–‡æ–‡æ¡£</li><li><a href="https://www.kancloud.cn/sliver_horn/gorm/1861157">GORM V2 ä¸­æ–‡æ–‡æ¡£</a> çœ‹äº‘æ–‡æ¡£</li><li><a href="https://gorm.io/docs/gorm_config.html">GORM V2 è‹±æ–‡æ–‡æ¡£</a> å®˜æ–¹æ–‡æ¡£</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macå¿…è£…è½¯ä»¶</title>
      <link href="/2021/09/17/Mac%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/"/>
      <url>/2021/09/17/Mac%E5%BF%85%E8%A3%85%E8%BD%AF%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="ç³»ç»Ÿè½¯ä»¶">ç³»ç»Ÿè½¯ä»¶</h2><ol><li><a href="https://www.jianshu.com/p/b7b789a2ed2c">homebrew</a></li><li><a href="https://www.jianshu.com/p/4fc53d7d7620">mysql</a></li><li><a href="https://github.com/pyenv/pyenv#homebrew-on-macos">pyenv</a></li><li><a href="https://www.runoob.com/w3cnote/nvm-manager-node-versions.html">nvm</a></li><li><a href="">redis</a> ç›´æ¥<code>brew install redis</code>å³å¯</li></ol><h2 id="Macå¿…è£…è½¯ä»¶">Macå¿…è£…è½¯ä»¶</h2><ol><li><a href="https://iina.io/">IINA</a> æœ€å¥½ç”¨çš„éŸ³è§†é¢‘æ’­æ”¾è½¯ä»¶ï¼ˆå¯æ’­æ”¾ä»»ä½•åœ°å€</li><li><a href="https://www.typora.io/">Typora</a> æœ€å¥½ç”¨çš„Markdownç¼–è¾‘å·¥å…· ï¼ˆâ•<code>PicGo</code>å®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ </li><li><a href="https://code.visualstudio.com/">VsCode</a> æœ€å¥½ç”¨çš„ä»£ç ç¼–è¾‘å·¥å…·</li><li><a href="http://www.neatdownloadmanager.com/index.php/en/">Neat Download Manager</a> æœ€å¿«é€Ÿçš„ä¸‹è½½å·¥å…·</li><li><a href="https://github.com/electerm/electerm">Electerm</a> å¼€æºçš„è·¨å¹³å°Shellç®¡ç†å·¥å…·</li><li><a href="http://www.hostbuf.com/">FinalShell</a> æœ€å¥½ç”¨è·¨å¹³å°Shellç®¡ç†å·¥å…·ï¼Œå°±æ˜¯ä¸å¼€æº</li><li><a href="https://lemon.qq.com/">Tencent Lemon</a> ç±»ä¼¼äºCleanMyMacï¼Œä½†æ˜¯å®Œå…¨å…è´¹</li><li><a href="https://apps.apple.com/cn/app/xmind-2020-%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/id1327661892?mt=12">xmind</a> æ€ç»´å¯¼å›¾</li><li><a href="https://apps.apple.com/cn/app/wps-office/id1443749478?mt=12">wps</a> å¥½ç”¨çš„æ–‡æ¡£ä¸­å¿ƒ</li><li><a href="https://tlanyan.me/v2ray-clients-download/">V2ray</a> mac æ¨è<code>v2rayu</code>, winæ¨è<code>v2rayn</code> ï¼ˆå…è´¹è®¢é˜…<a href="https://github.com/freefq/free">free</a> <a href="https://youjinnode.com/#/">å¹½ç¦èŠ‚ç‚¹</a></li></ol><hr><p>å¯é€‰è½¯ä»¶</p><ol><li><a href="https://obsproject.com/">OBS</a> å¼ºå¤§çš„æ¨æµå·¥å…·</li><li><a href="https://apps.apple.com/cn/app/ishot-%E4%BC%98%E7%A7%80%E7%9A%84%E6%88%AA%E5%9B%BE%E5%BD%95%E5%B1%8F%E5%B7%A5%E5%85%B7/id1485844094?mt=12">ishot</a> æˆªå›¾ã€é•¿æˆªå›¾ã€è´´å›¾ã€æ ‡æ³¨ã€å–è‰²ã€å½•å±ï¼Œæ ·æ ·ä¼˜ç§€</li><li><a href="https://github.com/Molunerfinn/PicGo/">PicGo</a> ä¸€ä¸ªç”¨äºå¿«é€Ÿä¸Šä¼ å›¾ç‰‡å¹¶è·å–å›¾ç‰‡ URL é“¾æ¥çš„å·¥å…·</li><li><a href="https://www.macwk.com/soft/daisydisk">Daisy Disk</a> ç£ç›˜å¤§å°ç®¡ç†</li><li><a href="https://apps.apple.com/cn/app/pixeur-%E5%B1%8F%E5%B9%95%E6%8B%BE%E8%89%B2%E5%99%A8/id1507890049?mt=12">Pixeur - å±å¹•æ‹¾è‰²å™¨</a> å–è‰²å™¨</li><li><a href="https://www.zhinin.com/parallels_desktop_15-mac.html">Parallels Desktop</a> è™šæ‹Ÿæœºç®¡ç† <a href="https://mp.weixin.qq.com/s/HpHRrJrUh7PJRYAWhusk-g">big sur</a></li><li><a href="https://www.macwk.com/soft/navicat-premium">Navicat Premium</a> æ•°æ®åº“ç®¡ç†</li></ol><p>MACç ´è§£è½¯ä»¶ç½‘å€</p><ol><li><a href="https://www.macwk.com/">macwk</a></li><li><a href="https://www.zhinin.com/">çŸ¥æ‚¨ç½‘</a></li><li><a href="https://xclient.info/">XClient</a></li><li><a href="http://www.ruanman.net/?s=parallels">è½¯æ›¼ç½‘</a></li></ol><p>Chrome æ’ä»¶</p><ol><li><a href="https://chrome.google.com/webstore/detail/%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D-%E8%81%9A%E5%90%88%E8%AF%8D%E5%85%B8%E5%88%92%E8%AF%8D%E7%BF%BB%E8%AF%91/cdonnmffkdaoajfknoeeecmchibpmkmg?utm_source=chrome-ntp-icon">æ²™æ‹‰æŸ¥è¯</a> åˆ’è¯ç¿»è¯‘</li><li><a href="https://chrome.google.com/webstore/detail/infinity-new-tab-pro/nnnkddnnlpamobajfibfdgfnbcnkgngh?utm_source=chrome-ntp-icon">infinity pro</a> æ–°æ ‡ç­¾</li></ol><h2 id="Mac-å¸¸è§é—®é¢˜">Mac å¸¸è§é—®é¢˜</h2><h3 id="åˆ·æ–°DNS">åˆ·æ–°DNS</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dscacheutil -flushcache</span><br><span class="line">sudo killall -HUP mDNSResponder</span><br></pre></td></tr></tbody></table></figure><h3 id="xxx-appå·²æŸå-æ‰“ä¸å¼€-ä½ åº”è¯¥å°†å®ƒç§»åˆ°åºŸçº¸ç¯“-å·²è§£å†³">xxx.appå·²æŸå,æ‰“ä¸å¼€.ä½ åº”è¯¥å°†å®ƒç§»åˆ°åºŸçº¸ç¯“-å·²è§£å†³</h3><ol><li><p>ç³»ç»Ÿåå¥½è®¾ç½®â€¦ -&gt; å®‰å…¨æ€§ä¸éšç§â€“&gt;ä¿®æ”¹ä¸ºä»»ä½•æ¥æº</p></li><li><p>serriaé‡Œé¢æ²¡æœ‰â€œä»»ä½•æ¥æºâ€è¿™ä¸€é¡¹ï¼Œéœ€è¦æ‰“å¼€ç»ˆç«¯æ‰§è¡Œsudo spctl --master-disableï¼Œè¿™ä¸ªæ—¶å€™å†å»ç³»ç»Ÿåå¥½è®¾ç½®â€¦ -&gt; å®‰å…¨æ€§ä¸éšç§ æ˜¯ä¸æ˜¯å‘ç°æœ‰äº†â€œä»»ä½•æ¥æºâ€è¿™ä¸€é¡¹</p></li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å…è®¸ä»»ä½•æ¥æºçš„è½¯ä»¶</span><br><span class="line">sudo spctl --master-disable</span><br><span class="line"># å…³é—­</span><br><span class="line">sudo spctl --master-enable</span><br></pre></td></tr></tbody></table></figure><h3 id="å·²ç»å‹¾é€‰â€œå…è®¸ä»»ä½•æ¥æºâ€ï¼Œä¸ºå•¥è¿˜æ˜¯æç¤ºâ€œæ–‡ä»¶å·²æŸåâ€">å·²ç»å‹¾é€‰â€œå…è®¸ä»»ä½•æ¥æºâ€ï¼Œä¸ºå•¥è¿˜æ˜¯æç¤ºâ€œæ–‡ä»¶å·²æŸåâ€</h3><p>æ‰“å¼€ç»ˆç«¯ï¼Œåœ¨ç»ˆç«¯ä¸­ç²˜è´´ä¸‹é¢å‘½ä»¤ï¼šã€<code>sudo xattr -r -d com.apple.quarantine </code>ã€‘ ,ç„¶åè¾“å…¥ä¸ªç©ºæ ¼ï¼Œå†å°†åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„è½¯ä»¶æ‹–æ‹½åˆ°å‘½ä»¤åé¢ï¼ŒæŒ‰å›è½¦åè¾“å…¥å¯†ç æ‰§è¡Œã€‚<br>æ¯”å¦‚ï¼šSketchçš„å‘½ä»¤æ˜¯ sudo xattr -r -d com.apple.quarantine /Applications/Sketch.app<br>äº²æµ‹å¯è¡Œ</p><h3 id="MACæŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ">MACæŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</h3><ul><li>lsof -i tcp:port  ï¼ˆportæ›¿æ¢æˆç«¯å£å·ï¼Œæ¯”å¦‚6379ï¼‰å¯ä»¥æŸ¥çœ‹è¯¥ç«¯å£è¢«ä»€ä¹ˆç¨‹åºå ç”¨</li><li>kill port å…³é—­ç«¯å£</li></ul><h3 id="æ˜¾ç¤ºfinderçš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶">æ˜¾ç¤ºfinderçš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶</h3><p><code>defaults write com.apple.Finder AppleShowAllFiles true</code><br>ç„¶åæŒ‰ä½option+å³å‡»finderï¼Œé‡å¯finder<br><code>Command shift .</code> éšè—æ˜¾ç¤ºéšè—æ–‡ä»¶</p><h3 id="Q-Canâ€™t-chown-usr-local-in-High-Sierra">Q:Canâ€™t chown /usr/local in High Sierra</h3><p>A:sudo chown -R $(whoami) $(brew --prefix)/*</p><h3 id="Xcode-æ”¯æŒåº“">Xcode æ”¯æŒåº“</h3><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1zXEFlt94bz3O1e3GdtG92w">https://pan.baidu.com/s/1zXEFlt94bz3O1e3GdtG92w</a> å¯†ç : rc4k<br>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport</p>]]></content>
      
      
      <categories>
          
          <category> mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typora+GitHub+PicGoæ‰“é€ ä¸æ»‘çš„ç¼–è¾‘ä½“éªŒ</title>
      <link href="/2021/09/17/Typora-GitHub-PicGo%E6%89%93%E9%80%A0%E4%B8%9D%E6%BB%91%E7%9A%84%E7%BC%96%E8%BE%91%E4%BD%93%E9%AA%8C/"/>
      <url>/2021/09/17/Typora-GitHub-PicGo%E6%89%93%E9%80%A0%E4%B8%9D%E6%BB%91%E7%9A%84%E7%BC%96%E8%BE%91%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰æ–‡">å‰æ–‡</h3><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½éœ€è¦ä¸€ä¸ªå…¬å…±çš„èµ„æºåœ°å€æ¥å­˜å‚¨è‡ªå·±çš„æ–‡ç« ç­‰ä¿¡æ¯ï¼Œä½œä¸ºä¸€ä¸ªcoderï¼Œé‚£å½“ç„¶æ˜¯è¦ç”¨æˆ‘ä»¬ä¸“å±çš„è¯­è¨€æ¥å†™æ—¥è®°äº†ï¼ˆmarkdownï¼‰ã€‚è¿™é‡Œå°±ç»™å¤§å®¶è®²è§£ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨<a href="https://www.typora.io">typora</a> + <a href="https://github.com/Molunerfinn/PicGo">PicGo</a> + <a href="https://github.com/">github</a> æ‰“é€ ä¸“å±çš„ç¼–è¾‘&amp;å­˜å‚¨æ–¹å¼ã€‚</p><h3 id="å‡†å¤‡">å‡†å¤‡</h3><p>ä¸€ã€ä»ä¸Šé¢çš„é“¾æ¥ä¸­ä¸‹è½½å¹¶å®‰è£…<code>typora</code>å’Œ<code>PicGo</code><br>äºŒã€ ç™»å½•<code>github</code>è´¦å·</p><ol><li>åˆ›å»ºå…¬å¼€èµ„æºåº“<br><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/image-20210917113156228.png" alt="image-20210917113156228"></li><li>ç”Ÿæˆæ–°ä»¤ç‰Œ</li></ol><ul><li><p>ä¾æ¬¡ç‚¹å‡» å³ä¸Šè§’ç‚¹<code>ç”¨æˆ·å¤´åƒ</code> -&gt; <code>Settings</code> -&gt; <code>Developer settings</code> -&gt;  <code>Personal access tokens</code>ï¼‰-&gt; <code>Generate new token</code><br><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/image-20210917113803036.png" alt="image-20210917113803036"></p></li><li><p>è®¾ç½®ä»¤ç‰Œæè¿°æ€§åç§°ï¼Œè¿‡æœŸæ—¶é—´çœ‹è‡ªå·±æƒ…å†µé€‰æ‹©ï¼Œ<code>Select scopes</code>åªå‹¾é€‰ï¼š<code>repo</code>ã€ <code>user</code><br><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/image-20210917114208452.png" alt="image-20210917114208452"></p></li><li><p><code>Generate token</code> ç”Ÿæˆä»¤ç‰Œ <strong>âš ï¸ä»¤ç‰Œåªæ˜¾ç¤ºä¸€æ¬¡ï¼Œä¸€å®šè¦å¤åˆ¶ä¿å­˜å¥½</strong></p></li></ul><h3 id="è®¾ç½®PicGoå›¾åºŠ">è®¾ç½®PicGoå›¾åºŠ</h3><ol><li><p>æ‰“å¼€<code>picgo</code>ååœ¨é¡¶éƒ¨èœå•æ <code>å³å‡»å›¾æ ‡</code>ï¼Œé€‰æ‹©<code>æ‰“å¼€è¯¦æƒ…çª—å£</code>ï¼Œé€‰æ‹©<code>PicGoè®¾ç½®</code>å¹¶å‹¾é€‰<code>GitHubå›¾åºŠ</code>ï¼›å°±ä¼šåœ¨<code>å›¾åºŠè®¾ç½®</code>å¤„æ˜¾ç¤ºå›¾åºŠ<br><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/image-20210917115945814.png" alt="image-20210917115945814"></p></li><li><p>é…ç½®<code>GitHubå›¾åºŠ</code></p></li></ol><ul><li>å¡«å†™githubè´¦å·åï¼š <code>githubè´¦æˆ·/ä»“åº“å</code></li><li>ä¸€èˆ¬ä¸ºmasteræˆ–è€…mainï¼Œå…·ä½“çœ‹ä½ çš„å»ºçš„ä»“åº“</li><li>ä¸ªäººä»¤ç‰Œï¼Œå°±æ˜¯ä¹‹å‰åœ¨githubä¸­ç”Ÿæˆç§äººä»¤ç‰Œæ—¶å¾—åˆ°çš„ä¸€ä¸²å­—ç¬¦ä¸²</li><li>å›¾ç‰‡å­˜æ”¾åœ¨ä»“åº“ä¸‹é¢çš„å“ªä¸ªç›®å½•ï¼Œä¸å¡«å°±åœ¨é¡¹ç›®çš„æ ¹ç›®</li><li>é»˜è®¤çš„åŸŸåæ— æ³•è®¿é—®ï¼Œä¿®æ”¹ä¸ºå®˜æ–¹<code>https://raw.githubusercontent.com/githubè´¦æˆ·/ä»“åº“å/master/img/icon.png</code> æˆ–è€… CDNåŸŸå<code>https://cdn.jsdelivr.net/gh/githubè´¦æˆ·/ä»“åº“å/img/icon.png</code>ï¼Œæ¨èä½¿ç”¨cdnåŸŸå<br><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/image-20210917120159803.png" alt="image-20210917120159803"></li></ul><ol start="3"><li>å¤åˆ¶ä»»æ„å›¾ç‰‡åï¼Œç‚¹å‡»èœå•æ åº”ç”¨å›¾æ ‡ï¼Œå³å¯çœ‹åˆ°å›¾ç‰‡ä¸Šä¼ </li></ol><h3 id="typoraå›¾ç‰‡ä¸Šä¼ ">typoraå›¾ç‰‡ä¸Šä¼ </h3><ol><li>æ‰“å¼€<code>typora</code>çš„<code>åå¥½è®¾ç½®</code>ä¸‹çš„<code>å›¾åƒ</code></li><li><code>æ’å…¥å›¾ç‰‡æ—¶</code>é»˜è®¤<code>æ— æ“ä½œ</code>ï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©æ˜¯å¦<code>ä¸Šä¼ å›¾ç‰‡</code>ï¼›å‹¾é€‰ä»¥ä¸‹é€‰é¡¹</li></ol><ul><li>å¯¹æœ¬åœ°ä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</li></ul><ol start="3"><li><code>ä¸Šä¼ æœåŠ¡</code> é€‰<code>PicGo.app</code>åå³å¯</li></ol><p><img src="https://cdn.jsdelivr.net/gh/jeromexiong/resources/img/image-20210917111332765.png" alt="image-20210917114821536"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åŒæ ·çš„ï¼Œè¯¥æ–‡ç« å°±æ˜¯ä»¥é…ç½®å¥½çš„Typoraç¼–å†™çš„ï¼Œæ‰€æœ‰æˆªå›¾å¤åˆ¶åå°±ä¸Šä¼ å¹¶æ›¿æ¢é“¾æ¥ä¸ºcdnåŸŸåï¼Œç®€ç›´æ–¹ä¾¿çš„ä¸è¡Œã€‚</span><br><span class="line">é¡ºä¾¿è¯´ä¸‹æ”¹æ–‡ç« çš„æˆªå›¾å·¥å…·ä¸ºishotï¼Œè‡ªåŠ¨é˜´å½±æ³¨é‡Šç­‰ğŸ‘</span><br></pre></td></tr></tbody></table></figure><ul><li><a href="https://apps.apple.com/cn/app/ishot-%E6%88%AA%E5%9B%BE-%E9%95%BF%E6%88%AA%E5%9B%BE-%E6%A0%87%E6%B3%A8%E5%B7%A5%E5%85%B7/id1485844094?mt=12">ishot</a> Macä¸Šæœ€å¼ºçš„æˆªå›¾å·¥å…·</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Swift 5.1 é«˜å¸§ç‡æœ‹å‹åœˆå®ç°</title>
      <link href="/2020/04/29/Swift-5-1-%E9%AB%98%E5%B8%A7%E7%8E%87%E6%9C%8B%E5%8F%8B%E5%9C%88%E5%AE%9E%E7%8E%B0/"/>
      <url>/2020/04/29/Swift-5-1-%E9%AB%98%E5%B8%A7%E7%8E%87%E6%9C%8B%E5%8F%8B%E5%9C%88%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡åŸºäº**<a href="https://github.com/Instagram/IGListKit">IGListKit 4.0</a>**å®ç°åˆ—è¡¨çš„é«˜å¸§ç‡æ»‘åŠ¨æ•ˆæœï¼Œé¡¹ç›®åœ°å€è§<a href="https://github.com/jeromexiong/cover-moments">GitHub</a></p></blockquote><h2 id="è¯ä¸å¤šè¯´ï¼Œä¸Šå›¾">è¯ä¸å¤šè¯´ï¼Œä¸Šå›¾</h2><p><img src="/images/moments.webp" alt="moments.webp.gif"></p><h2 id="åˆ›å»ºåŸºç±»æ§åˆ¶å™¨">åˆ›å»ºåŸºç±»æ§åˆ¶å™¨</h2><p>æ‰€æœ‰<code>IGListKit</code>çš„è§†å›¾æ§åˆ¶å™¨éƒ½åº”è¯¥ç»§æ‰¿æ­¤ç±»ï¼Œå‡å°‘å¤ç”¨</p><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseListVC</span>: <span class="title">UIViewController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> objects: [<span class="type">ListDiffable</span>] <span class="operator">=</span> [<span class="type">ListDiffable</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> collectionView: <span class="type">UICollectionView</span> <span class="operator">=</span> {</span><br><span class="line">        <span class="keyword">let</span> flow <span class="operator">=</span> <span class="type">UICollectionViewFlowLayout</span>()</span><br><span class="line">        <span class="keyword">let</span> collectionView <span class="operator">=</span> <span class="type">UICollectionView</span>(frame: <span class="type">CGRect</span>.zero, collectionViewLayout: flow)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">#available</span>(<span class="keyword">iOS</span> <span class="number">11.0</span>, <span class="operator">*</span>) {</span><br><span class="line">            collectionView.contentInsetAdjustmentBehavior <span class="operator">=</span> .never</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            automaticallyAdjustsScrollViewInsets <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        }</span><br><span class="line">        collectionView.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>.groupTableViewBackground</span><br><span class="line">        <span class="keyword">return</span> collectionView</span><br><span class="line">    }()</span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> adapter: <span class="type">ListAdapter</span> <span class="operator">=</span> {</span><br><span class="line">        <span class="keyword">let</span> adapter <span class="operator">=</span> <span class="type">ListAdapter</span>(updater: <span class="type">ListAdapterUpdater</span>(), viewController: <span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">return</span> adapter</span><br><span class="line">    }()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span>()</span> {</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        view.addSubview(collectionView)</span><br><span class="line">        adapter.collectionView <span class="operator">=</span> collectionView</span><br><span class="line">        adapter.dataSource <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLayoutSubviews</span>()</span> {</span><br><span class="line">        <span class="keyword">super</span>.viewDidLayoutSubviews()</span><br><span class="line">        collectionView.frame <span class="operator">=</span> view.bounds</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">BaseListVC</span> : <span class="title">ListAdapterDataSource</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">objects</span>(<span class="params">for</span> <span class="params">listAdapter</span>: <span class="type">ListAdapter</span>)</span> -&gt; [<span class="type">ListDiffable</span>] {</span><br><span class="line">        <span class="keyword">return</span> objects</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">listAdapter</span>(<span class="keyword">_</span> <span class="params">listAdapter</span>: <span class="type">ListAdapter</span>, <span class="params">sectionControllerFor</span> <span class="params">object</span>: <span class="keyword">Any</span>)</span> -&gt; <span class="type">ListSectionController</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="type">ListSectionController</span>()</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">emptyView</span>(<span class="params">for</span> <span class="params">listAdapter</span>: <span class="type">ListAdapter</span>)</span> -&gt; <span class="type">UIView</span>? {</span><br><span class="line">        <span class="comment">// æ— æ•°æ®æ—¶collectionViewçš„å±•ç¤º</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="åˆ›å»ºMomentInfoæ¨¡å‹">åˆ›å»º<code>MomentInfo</code>æ¨¡å‹</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class MomentInfo {</span><br><span class="line">    var id: Int = 0</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">extension MomentInfo: ListDiffable {</span><br><span class="line">    func diffIdentifier() -&gt; NSObjectProtocol {</span><br><span class="line">        // åŒºåˆ†æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡ï¼Œå¯å¤šå±æ€§å åŠ </span><br><span class="line">        return id as NSObjectProtocol</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // åˆ¤æ–­å¯¹è±¡æ˜¯å¦ç›¸åŒï¼Œä¸åŒ(false)åˆ™åˆ·æ–°</span><br><span class="line">    func isEqual(toDiffableObject object: ListDiffable?) -&gt; Bool {</span><br><span class="line">        guard self === object else { return true }</span><br><span class="line">        guard let object = object as? MomentInfo else { return false }</span><br><span class="line">        return id == object.id</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">extension MomentInfo: Equatable {</span><br><span class="line">    static func == (lhs: MomentInfo, rhs: MomentInfo) -&gt; Bool {</span><br><span class="line">        return lhs.isEqual(toDiffableObject: rhs)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="å­ç±»å¤å†™">å­ç±»å¤å†™</h2><ol><li>æ›´æ–°æ•°æ®</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//info -&gt; MomentInfoçš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">self</span>.objects.append(info)</span><br><span class="line"><span class="comment">// æ•°æ®æ·»åŠ å®Œæˆåæ›´æ–°</span></span><br><span class="line"><span class="keyword">self</span>.adapter.performUpdates(animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å¤å†™ç»‘å®šSection</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">override func listAdapter(_ listAdapter: ListAdapter, sectionControllerFor object: Any) -&gt; ListSectionController {</span><br><span class="line">    // æ­¤objectçš„ç±»å‹å°±æ˜¯æ›´æ–°çš„self.objectsçš„itemç±»å‹</span><br><span class="line">    switch object {</span><br><span class="line">    case is MomentInfo:</span><br><span class="line">        // MomentBindingSection ç»§æ‰¿è‡ª ListBindingSectionController</span><br><span class="line">        let section = MomentBindingSection()</span><br><span class="line">        return section</span><br><span class="line">    default:</span><br><span class="line">        fatalError()</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ä½¿ç”¨ListBindingSectionControllerç»‘å®šå¤šä¸ªcell">ä½¿ç”¨<code>ListBindingSectionController</code>ç»‘å®šå¤šä¸ªcell</h2><ol><li>åˆ›å»º<code>UICollectionViewCell</code>âš ï¸<strong>åªèƒ½æœ‰ä¸€ç§æ ·å¼å¸ƒå±€ï¼Œä¸åŒæ ·å¼éœ€è¦ä¸åŒçš„cell</strong></li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class MomentTopCell: UICollectionViewCell {</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">extension MomentTopCell: ListBindable {</span><br><span class="line">    func bindViewModel(_ viewModel: Any) {</span><br><span class="line">        guard let viewModel = viewModel as? MomentInfo else { return }</span><br><span class="line">        // æ›´æ–°cellæ•°æ®</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>è·å–cellå¯¹è±¡</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func momentTopCell(at index: Int) -&gt; MomentTopCell {</span><br><span class="line">//  guard let cell = collectionContext?.dequeueReusableCell(withNibName: MomentTopCell.jx_className, bundle: nil, for: self, at: index) as? MomentTopCell else { fatalError() }</span><br><span class="line">    guard let cell = collectionContext?.dequeueReusableCell(of: MomentTopCell.self, for: self, at: index) as? MomentTopCell else { fatalError() }</span><br><span class="line">    // ä¼ å…¥cellæ•°æ®</span><br><span class="line">    cell.bindViewModel(object!)</span><br><span class="line">    return cell</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>ç»‘å®šè§†å›¾æ¨¡å‹(ViewModel)ï¼Œå¯ä½¿ç”¨æšä¸¾æ›¿ä»£</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">enum ViewModelEnum: String {</span><br><span class="line">    case top, header, image_single, location, bottom</span><br><span class="line">}</span><br><span class="line">/// ç»‘å®šviewmodelsï¼Œç”¨ä»¥åŒºåˆ†ä¸åŒcell</span><br><span class="line">func sectionController(_ sectionController: ListBindingSectionController&lt;ListDiffable&gt;, viewModelsFor object: Any) -&gt; [ListDiffable] {</span><br><span class="line">    guard let object = object as? MomentInfo else { return [] }</span><br><span class="line">    var results: [ListDiffable] = []</span><br><span class="line">    if object.userInfo != nil {</span><br><span class="line">        results.append(ViewModelEnum.top.rawValue as ListDiffable)</span><br><span class="line">    }</span><br><span class="line">    if object.images.count == 1 {</span><br><span class="line">        results.append(ViewModelEnum.image_single.rawValue as ListDiffable)</span><br><span class="line">    }else {</span><br><span class="line">        results.append(ViewModelEnum.header.rawValue as ListDiffable)</span><br><span class="line">    }</span><br><span class="line">    if !object.location.isEmpty {</span><br><span class="line">        results.append(ViewModelEnum.location.rawValue as ListDiffable)</span><br><span class="line">    }</span><br><span class="line">    results.append(ViewModelEnum.bottom.rawValue as ListDiffable)</span><br><span class="line">    return results</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/// ä¸åŒviewmodelå¯¹åº”çš„cell</span><br><span class="line">func sectionController(_ sectionController: ListBindingSectionController&lt;ListDiffable&gt;, cellForViewModel viewModel: Any, at index: Int) -&gt; UICollectionViewCell &amp; ListBindable {</span><br><span class="line">    let viewModel = ViewModelEnum(rawValue: viewModel as! String)!</span><br><span class="line">    switch viewModel {</span><br><span class="line">    case .top:</span><br><span class="line">        return momentTopCell(at: index)</span><br><span class="line">    case .image_single:</span><br><span class="line">        return momentHeaderImageCell(at: index)</span><br><span class="line">    case .header:</span><br><span class="line">        return momentHeaderCell(at: index)</span><br><span class="line">    case .location:</span><br><span class="line">        return momentLocationCell(at: index)</span><br><span class="line">    case .bottom:</span><br><span class="line">        return momentBottomCell(at: index)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">/// ä¸åŒcellå¯¹åº”çš„size</span><br><span class="line">func sectionController(_ sectionController: ListBindingSectionController&lt;ListDiffable&gt;, sizeForViewModel viewModel: Any, at index: Int) -&gt; CGSize {</span><br><span class="line">    guard let object = object as? MomentInfo else { fatalError() }</span><br><span class="line">    let viewModel = ViewModelEnum(rawValue: viewModel as! String)!</span><br><span class="line">    let width: CGFloat = collectionContext!.containerSize(for: self).width</span><br><span class="line">    switch viewModel {</span><br><span class="line">    case .top:</span><br><span class="line">        return CGSize(width: width, height: 400)</span><br><span class="line">    case .header, .image_single:</span><br><span class="line">        return CGSize(width: width, height: object.cellHeight)</span><br><span class="line">    case .location:</span><br><span class="line">        return CGSize(width: width, height: 30)</span><br><span class="line">    case .bottom:</span><br><span class="line">        return CGSize(width: width, height: 30)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> dev </category>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‚è®°</title>
      <link href="/2020/04/29/%E6%9D%82%E8%AE%B0/"/>
      <url>/2020/04/29/%E6%9D%82%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ç»Ÿè®¡ä»£ç é‡"><a href="http://www.cnblogs.com/kevingrace/p/6768005.html">ç»Ÿè®¡ä»£ç é‡</a></h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">find . -name "*.js" -or -name "*.json" -or -name "*.wxml" -or -name "*.wxss" |xargs cat|grep -r -v ^$|wc -l</span><br><span class="line"></span><br><span class="line">find . -name "*.swift" -or -name "*.xib" |xargs grep -v "^$"|wc -l</span><br><span class="line">find . -name "*.m" -or -name "*.h" -or -name "*.xib" -or -name "*.c" |xargs wc -l</span><br><span class="line">find . "(" -name "*.m" -or -name "*.mm" -or -name "*.cpp" -or -name "*.h" -or -name "*.rss" ")" -print | xargs wc -l</span><br><span class="line"></span><br><span class="line">-name  "*.m" å°±è¡¨ç¤ºæ‰©å±•åä¸º.mçš„æ–‡ä»¶ã€‚</span><br><span class="line">ç»Ÿè®¡javaæ–‡ä»¶å’Œxmlæ–‡ä»¶çš„å‘½ä»¤åˆ†åˆ«æ˜¯ï¼š</span><br><span class="line"></span><br><span class="line">find . "(" -name "*.java"  ")" -print | xargs wc -l</span><br><span class="line">find . "(" -name "*.xml"  ")" -print | xargs wc -l</span><br><span class="line"></span><br><span class="line">grep -v "^$"æ˜¯å»æ‰ç©ºè¡Œ</span><br><span class="line">æ³¨é‡Šä¹Ÿç»Ÿè®¡åœ¨ä»£ç é‡ä¹‹å†…ï¼Œæ¯•ç«Ÿä¹Ÿä¸€ä¸ªå­—ä¸€ä¸ªå­—ç å‡ºæ¥çš„</span><br></pre></td></tr></tbody></table></figure><h2 id="é˜¿é‡Œäº‘æœåŠ¡å™¨æ­å»ºgitæœåŠ¡å™¨"><a href="https://www.cnblogs.com/dst5650/p/8503772.html">é˜¿é‡Œäº‘æœåŠ¡å™¨æ­å»ºgitæœåŠ¡å™¨</a></h2><h2 id="æŒ–çŸ¿æœºé—®é¢˜">æŒ–çŸ¿æœºé—®é¢˜</h2><ul><li><a href="https://www.freebuf.com/vuls/200289.html">sysupdate çš„è¿›ç¨‹å æ®äº†ç»å¤§éƒ¨åˆ†çš„ CPU èµ„æº</a></li></ul><h2 id="å¤–éƒ¨è¿è¡ŒASæ¨¡æ‹Ÿå™¨">å¤–éƒ¨è¿è¡ŒASæ¨¡æ‹Ÿå™¨</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd Library/Android/sdk/emulator/</span><br><span class="line">emulator -list-avds</span><br><span class="line">emulator -avd Nexus_5X_API_28_x86</span><br></pre></td></tr></tbody></table></figure><ul><li><code>uname -a</code> æŸ¥çœ‹Linuxå†…æ ¸ç‰ˆæœ¬å‘½ä»¤</li><li><code>lsb_release -a</code> å³å¯åˆ—å‡ºæ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯</li></ul>]]></content>
      
      
      <categories>
          
          <category> dev </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IGListKitä½¿ç”¨</title>
      <link href="/2020/04/29/IGListKit%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/04/29/IGListKit%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºåŸºç±»æ§åˆ¶å™¨">åˆ›å»ºåŸºç±»æ§åˆ¶å™¨</h2><p>æ‰€æœ‰<code>IGListKit</code>çš„è§†å›¾æ§åˆ¶å™¨éƒ½åº”è¯¥ç»§æ‰¿æ­¤ç±»ï¼Œå‡å°‘å¤ç”¨</p><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseListVC</span>: <span class="title">UIViewController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> objects: [<span class="type">ListDiffable</span>] <span class="operator">=</span> [<span class="type">ListDiffable</span>]()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> collectionView: <span class="type">UICollectionView</span> <span class="operator">=</span> {</span><br><span class="line">        <span class="keyword">let</span> flow <span class="operator">=</span> <span class="type">UICollectionViewFlowLayout</span>()</span><br><span class="line">        <span class="keyword">let</span> collectionView <span class="operator">=</span> <span class="type">UICollectionView</span>(frame: <span class="type">CGRect</span>.zero, collectionViewLayout: flow)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">#available</span>(<span class="keyword">iOS</span> <span class="number">11.0</span>, <span class="operator">*</span>) {</span><br><span class="line">            collectionView.contentInsetAdjustmentBehavior <span class="operator">=</span> .never</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            automaticallyAdjustsScrollViewInsets <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        }</span><br><span class="line">        collectionView.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>.groupTableViewBackground</span><br><span class="line">        <span class="keyword">return</span> collectionView</span><br><span class="line">    }()</span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> adapter: <span class="type">ListAdapter</span> <span class="operator">=</span> {</span><br><span class="line">        <span class="keyword">let</span> adapter <span class="operator">=</span> <span class="type">ListAdapter</span>(updater: <span class="type">ListAdapterUpdater</span>(), viewController: <span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">return</span> adapter</span><br><span class="line">    }()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span>()</span> {</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        view.addSubview(collectionView)</span><br><span class="line">        adapter.collectionView <span class="operator">=</span> collectionView</span><br><span class="line">        adapter.dataSource <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLayoutSubviews</span>()</span> {</span><br><span class="line">        <span class="keyword">super</span>.viewDidLayoutSubviews()</span><br><span class="line">        collectionView.frame <span class="operator">=</span> view.bounds</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">BaseListVC</span> : <span class="title">ListAdapterDataSource</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">objects</span>(<span class="params">for</span> <span class="params">listAdapter</span>: <span class="type">ListAdapter</span>)</span> -&gt; [<span class="type">ListDiffable</span>] {</span><br><span class="line">        <span class="keyword">return</span> objects</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">listAdapter</span>(<span class="keyword">_</span> <span class="params">listAdapter</span>: <span class="type">ListAdapter</span>, <span class="params">sectionControllerFor</span> <span class="params">object</span>: <span class="keyword">Any</span>)</span> -&gt; <span class="type">ListSectionController</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="type">ListSectionController</span>()</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">emptyView</span>(<span class="params">for</span> <span class="params">listAdapter</span>: <span class="type">ListAdapter</span>)</span> -&gt; <span class="type">UIView</span>? {</span><br><span class="line">        <span class="comment">// æ— æ•°æ®æ—¶collectionViewçš„å±•ç¤º</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="åˆ›å»ºMomentInfoæ¨¡å‹">åˆ›å»º<code>MomentInfo</code>æ¨¡å‹</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class MomentInfo {</span><br><span class="line">    var id: Int = 0</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">extension MomentInfo: ListDiffable {</span><br><span class="line">    func diffIdentifier() -&gt; NSObjectProtocol {</span><br><span class="line">        // åŒºåˆ†æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡ï¼Œå¯å¤šå±æ€§å åŠ </span><br><span class="line">        return id as NSObjectProtocol</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // åˆ¤æ–­å¯¹è±¡æ˜¯å¦ç›¸åŒï¼Œä¸åŒ(false)åˆ™åˆ·æ–°</span><br><span class="line">    func isEqual(toDiffableObject object: ListDiffable?) -&gt; Bool {</span><br><span class="line">        guard self === object else { return true }</span><br><span class="line">        guard let object = object as? MomentInfo else { return false }</span><br><span class="line">        return id == object.id</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">extension MomentInfo: Equatable {</span><br><span class="line">    static func == (lhs: MomentInfo, rhs: MomentInfo) -&gt; Bool {</span><br><span class="line">        return lhs.isEqual(toDiffableObject: rhs)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="å­ç±»å¤å†™">å­ç±»å¤å†™</h2><ol><li>æ›´æ–°æ•°æ®</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//info -&gt; MomentInfoçš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">self</span>.objects.append(info)</span><br><span class="line"><span class="comment">// æ•°æ®æ·»åŠ å®Œæˆåæ›´æ–°</span></span><br><span class="line"><span class="keyword">self</span>.adapter.performUpdates(animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å¤å†™ç»‘å®šSection</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">override func listAdapter(_ listAdapter: ListAdapter, sectionControllerFor object: Any) -&gt; ListSectionController {</span><br><span class="line">    // æ­¤objectçš„ç±»å‹å°±æ˜¯æ›´æ–°çš„self.objectsçš„itemç±»å‹</span><br><span class="line">    switch object {</span><br><span class="line">    case is MomentInfo:</span><br><span class="line">        // MomentBindingSection ç»§æ‰¿è‡ª ListBindingSectionController</span><br><span class="line">        let section = MomentBindingSection()</span><br><span class="line">        return section</span><br><span class="line">    default:</span><br><span class="line">        fatalError()</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ä½¿ç”¨ListBindingSectionControllerç»‘å®šå¤šä¸ªcell">ä½¿ç”¨<code>ListBindingSectionController</code>ç»‘å®šå¤šä¸ªcell</h2><ol><li>åˆ›å»º<code>UICollectionViewCell</code>âš ï¸<strong>åªèƒ½æœ‰ä¸€ç§æ ·å¼å¸ƒå±€ï¼Œä¸åŒæ ·å¼éœ€è¦ä¸åŒçš„cell</strong></li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class MomentTopCell: UICollectionViewCell {</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">extension MomentTopCell: ListBindable {</span><br><span class="line">    func bindViewModel(_ viewModel: Any) {</span><br><span class="line">        guard let viewModel = viewModel as? MomentInfo else { return }</span><br><span class="line">        // æ›´æ–°cellæ•°æ®</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>è·å–cellå¯¹è±¡</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func momentTopCell(at index: Int) -&gt; MomentTopCell {</span><br><span class="line">//  guard let cell = collectionContext?.dequeueReusableCell(withNibName: MomentTopCell.jx_className, bundle: nil, for: self, at: index) as? MomentTopCell else { fatalError() }</span><br><span class="line">    guard let cell = collectionContext?.dequeueReusableCell(of: MomentTopCell.self, for: self, at: index) as? MomentTopCell else { fatalError() }</span><br><span class="line">    // ä¼ å…¥cellæ•°æ®</span><br><span class="line">    cell.bindViewModel(object!)</span><br><span class="line">    return cell</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>ç»‘å®šè§†å›¾æ¨¡å‹(ViewModel)ï¼Œå¯ä½¿ç”¨æšä¸¾æ›¿ä»£</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">enum ViewModelEnum: String {</span><br><span class="line">    case top, header, image_single, location, bottom</span><br><span class="line">}</span><br><span class="line">/// ç»‘å®šviewmodelsï¼Œç”¨ä»¥åŒºåˆ†ä¸åŒcell</span><br><span class="line">func sectionController(_ sectionController: ListBindingSectionController&lt;ListDiffable&gt;, viewModelsFor object: Any) -&gt; [ListDiffable] {</span><br><span class="line">    guard let object = object as? MomentInfo else { return [] }</span><br><span class="line">    var results: [ListDiffable] = []</span><br><span class="line">    if object.userInfo != nil {</span><br><span class="line">        results.append(ViewModelEnum.top.rawValue as ListDiffable)</span><br><span class="line">    }</span><br><span class="line">    if object.images.count == 1 {</span><br><span class="line">        results.append(ViewModelEnum.image_single.rawValue as ListDiffable)</span><br><span class="line">    }else {</span><br><span class="line">        results.append(ViewModelEnum.header.rawValue as ListDiffable)</span><br><span class="line">    }</span><br><span class="line">    if !object.location.isEmpty {</span><br><span class="line">        results.append(ViewModelEnum.location.rawValue as ListDiffable)</span><br><span class="line">    }</span><br><span class="line">    results.append(ViewModelEnum.bottom.rawValue as ListDiffable)</span><br><span class="line">    return results</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/// ä¸åŒviewmodelå¯¹åº”çš„cell</span><br><span class="line">func sectionController(_ sectionController: ListBindingSectionController&lt;ListDiffable&gt;, cellForViewModel viewModel: Any, at index: Int) -&gt; UICollectionViewCell &amp; ListBindable {</span><br><span class="line">    let viewModel = ViewModelEnum(rawValue: viewModel as! String)!</span><br><span class="line">    switch viewModel {</span><br><span class="line">    case .top:</span><br><span class="line">        return momentTopCell(at: index)</span><br><span class="line">    case .image_single:</span><br><span class="line">        return momentHeaderImageCell(at: index)</span><br><span class="line">    case .header:</span><br><span class="line">        return momentHeaderCell(at: index)</span><br><span class="line">    case .location:</span><br><span class="line">        return momentLocationCell(at: index)</span><br><span class="line">    case .bottom:</span><br><span class="line">        return momentBottomCell(at: index)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">/// ä¸åŒcellå¯¹åº”çš„size</span><br><span class="line">func sectionController(_ sectionController: ListBindingSectionController&lt;ListDiffable&gt;, sizeForViewModel viewModel: Any, at index: Int) -&gt; CGSize {</span><br><span class="line">    guard let object = object as? MomentInfo else { fatalError() }</span><br><span class="line">    let viewModel = ViewModelEnum(rawValue: viewModel as! String)!</span><br><span class="line">    let width: CGFloat = collectionContext!.containerSize(for: self).width</span><br><span class="line">    switch viewModel {</span><br><span class="line">    case .top:</span><br><span class="line">        return CGSize(width: width, height: 400)</span><br><span class="line">    case .header, .image_single:</span><br><span class="line">        return CGSize(width: width, height: object.cellHeight)</span><br><span class="line">    case .location:</span><br><span class="line">        return CGSize(width: width, height: 30)</span><br><span class="line">    case .bottom:</span><br><span class="line">        return CGSize(width: width, height: 30)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> dev </category>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter ç¬”è®°</title>
      <link href="/2020/04/29/Flutter%20%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/04/29/Flutter%20%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="iOS">iOS</h2><h3 id="æ’ä»¶swift-è°ƒç”¨ocåº“">æ’ä»¶swift è°ƒç”¨ocåº“</h3><ol><li><code>project.podspec</code>æ–‡ä»¶æ·»åŠ åº“ä¾èµ– <code>s.dependency 'name', 'version'</code></li><li>å¦‚éœ€æ¡¥æ¥æ–‡ä»¶<ol><li><code>Pods/Development Pods/project/../ios/Classes/</code>ç›®å½•ä¸‹åˆ›å»ºæ¡¥æ¥æ–‡ä»¶<code>Flutter-Bridging-Header.h</code>ï¼Œå¹¶å¼•ç”¨åº“å¤´æ–‡ä»¶</li><li>åœ¨<code>project-umbrella.h</code>æ–‡ä»¶ä¸­æ·»åŠ <code>#import "Flutter-Bridging-Header.h"</code>(ä¹Ÿå¯ä»¥å…¨å±€æœç´¢<code>ProjectPlugin.h</code>åæ·»åŠ åœ¨å…¶ä¸‹)âš ï¸Podfileå¿…é¡»æœ‰<code>use_framework!</code>å±æ€§æ‰ä¼šç”Ÿæˆumbrellaæ–‡ä»¶</li></ol></li><li>å¦‚éœ€è¦æ·»åŠ å…¶ä»–èµ„æºæ–‡ä»¶ï¼Œéœ€è¦åœ¨<code>project.podspec</code>ä¸­é…ç½®</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">search_paths = [</span><br><span class="line">    '${SDKROOT}/usr/include/libxml2'</span><br><span class="line">]</span><br><span class="line">s.pod_target_xcconfig = {</span><br><span class="line">    'DEFINES_MODULE' =&gt; 'YES',</span><br><span class="line">    'VALID_ARCHS[sdk=iphonesimulator*]' =&gt; 'x86_64',</span><br><span class="line">    'HEADER_SEARCH_PATHS' =&gt; search_paths.join(' '),</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li>è¿›å…¥<code>Podfile</code>æ‰€åœ¨ç›®å½•<code>pod install</code></li><li>å¦‚æœè°ƒç”¨iOSæ’ä»¶å¤±è´¥ï¼Œåˆ™éœ€è¦åœ¨<code>Info.plist</code>ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç </li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;io.flutter.embedded_views_preview&lt;/key&gt;</span><br><span class="line">&lt;true/&gt;</span><br></pre></td></tr></tbody></table></figure><h2 id="Android">Android</h2><h3 id="å¯†é’¥-adb">å¯†é’¥ &amp; adb</h3><ul><li>è·å–jksåº”ç”¨ç­¾å <code>keytool -list -v -keystore yourkeystore</code>ï¼Œé€‰å–å¯¹åº”åˆ«åçš„<code>MD5</code>: <code>MD5.split(":").join("")</code></li><li><code>adb devices</code>æŸ¥çœ‹è¿æ¥è®¾å¤‡ï¼›<code>adb -s serial</code>æŒ‡å®šè®¾å¤‡è¿æ¥ï¼›<code>adb -s serial shell</code>è¿æ¥æŒ‡å®šè®¾å¤‡shell</li></ul><h2 id="Flutter">Flutter</h2><h3 id="è‡ªåŠ¨æ–¹å‘ç›‘å¬">è‡ªåŠ¨æ–¹å‘ç›‘å¬</h3><ol><li>æ·»åŠ æ¯ä¸€å¸§å›è°ƒæ–¹æ³•</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">void addPersistentFrameCallback(VoidCallback cb) {</span><br><span class="line">  final widgetsBinding = WidgetsBinding.instance;</span><br><span class="line">  widgetsBinding.addPostFrameCallback((callback) {</span><br><span class="line">    widgetsBinding.addPersistentFrameCallback((callback) {</span><br><span class="line">      if (cb != null) cb();</span><br><span class="line">      //è§¦å‘ä¸€å¸§çš„ç»˜åˆ¶</span><br><span class="line">      widgetsBinding.scheduleFrame();</span><br><span class="line">    });</span><br><span class="line">  });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>åœ¨<code>initState</code>æ–¹æ³•ä¸­åˆå§‹åŒ–ç›‘å¬</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">addPersistentFrameCallback(() {</span><br><span class="line">  var orientation = MediaQuery.of(videoContext).orientation;</span><br><span class="line">  bool _fullscreen;</span><br><span class="line">  if (orientation == Orientation.landscape) {</span><br><span class="line">    //æ¨ªå±</span><br><span class="line">    _fullscreen = true;</span><br><span class="line">    SystemChrome.setEnabledSystemUIOverlays([]);</span><br><span class="line">  } else if (orientation == Orientation.portrait) {</span><br><span class="line">    _fullscreen = false;</span><br><span class="line">    SystemChrome.setEnabledSystemUIOverlays(SystemUiOverlay.values);</span><br><span class="line">  }</span><br><span class="line">  if (_fullscreen != fullscreened) {</span><br><span class="line">    setState(() {</span><br><span class="line">      fullscreened = !fullscreened;</span><br><span class="line">      //è§¦å‘å…¨å±äº‹ä»¶</span><br><span class="line">      if (widget.onfullscreen != null) {</span><br><span class="line">        widget.onfullscreen(fullscreened);</span><br><span class="line">      }</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h3 id="æ‹¦æˆªç‰©ç†è¿”å›æŒ‰é”®">æ‹¦æˆªç‰©ç†è¿”å›æŒ‰é”®</h3><ol><li>WillPopScopeï¼Œä¼šæ‹¦æˆªå³æ»‘</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">int last = 0;</span><br><span class="line">Future&lt;bool&gt; doubleClickBack() {</span><br><span class="line">  int now = DateTime.now().millisecond;</span><br><span class="line">  if (now - last &gt; 800) {</span><br><span class="line">    last = DateTime.now().millisecond;</span><br><span class="line">    return Future.value(false);</span><br><span class="line">  } else {</span><br><span class="line">    return Future.value(true);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">WillPopScope(</span><br><span class="line">  onWillPop: doubleClickBack,</span><br><span class="line">  child: Widget</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å¼¹å‡ºä¸€ä¸ªæœ¬åœ°è·¯ç”±é˜²æ­¢ç‰©ç†æŒ‰é”®ç›´æ¥è¿”å›</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">void _navigateLocally(context) async {</span><br><span class="line">  if (!fullscreened) {</span><br><span class="line">    if (ModalRoute.of(context).willHandlePopInternally) {</span><br><span class="line">      Navigator.of(context).pop();</span><br><span class="line">    }</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line">  ModalRoute.of(context).addLocalHistoryEntry(LocalHistoryEntry(onRemove: () {</span><br><span class="line">    if (fullscreened) toggleFullScreen();</span><br><span class="line">  }));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="é—®é¢˜">é—®é¢˜</h2><h3 id="å‡çº§Xcode11-4å¯¼è‡´Flutteré¡¹ç›®æŠ¥é”™Building-for-iOS-but-the-linked-and-embedded-framework-App-frameworkâ€™çš„å¤„ç†">å‡çº§Xcode11.4å¯¼è‡´Flutteré¡¹ç›®æŠ¥é”™Building for iOS, but the linked and embedded framework 'App.frameworkâ€™çš„å¤„ç†</h3><ol><li>è¿›å…¥é¡¹ç›®æ ¹ç›®å½•</li><li>flutter clean</li><li>rm -rf ios/Flutter/App.framework</li></ol>]]></content>
      
      
      <categories>
          
          <category> dev </category>
          
          <category> è·¨å¹³å° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swift ç¬”è®°</title>
      <link href="/2018/01/01/Swift%20%E7%AC%94%E8%AE%B0/"/>
      <url>/2018/01/01/Swift%20%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1>Xcode</h1><h2 id="Xcodeè‡ªåŠ¨ç®¡ç†è¯ä¹¦æ–‡ä»¶æ¨¡å¼ä¸‹æ›´æ–°provisioning-profileæ–‡ä»¶">Xcodeè‡ªåŠ¨ç®¡ç†è¯ä¹¦æ–‡ä»¶æ¨¡å¼ä¸‹æ›´æ–°provisioning profileæ–‡ä»¶</h2><ol><li><a href="http://xn--develop-5t0lp6ak28b1l8cjw6d.apple.com">æ·»åŠ è®¾å¤‡åˆ°develop.apple.com</a></li><li>Xcodeåˆ‡åˆ°ç›¸åº”çš„targetçš„General tabä¸‹ï¼Œç„¶åç‚¹å‡»(!)æŒ‰é’®å±•ç¤ºprovisioning profileæ–‡ä»¶è¯¦æƒ…ï¼Œç„¶åæ‹–åŠ¨å·¦ä¸Šè§’çš„profileå›¾æ ‡åˆ°ç»ˆç«¯è·å–provisioning profileæ–‡ä»¶å</li><li>æ‰“å¼€~/Library/MobileDevice/Provisioning Profilesç›®å½•ï¼Œç„¶ååˆ é™¤ç›¸åŒæ–‡ä»¶åçš„provisioning profileæ–‡ä»¶</li><li>Xcodeä¼šè‡ªåŠ¨ä¸‹è½½æœ€æ–°çš„provisioning profileæ–‡ä»¶</li></ol><h2 id="Xcode-æ‰“åŒ…å‘å¸ƒ">Xcode æ‰“åŒ…å‘å¸ƒ</h2><ol><li>æ‰“åŒ…è¯ä¹¦</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ‰“åŒ…è¯ä¹¦æœ€å¤šåªæœ‰ä¸‰ä¸ªï¼Œéœ€è¦æ ¹æ®æç¤ºæ–‡å­—é€‰æ‹©æ­£ç¡®çš„è¯ä¹¦ã€‚</span><br><span class="line">è‹¥è¯ä¹¦åˆ›å»ºåä¸€ç›´æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œé‡å¯åå³å¯</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>è‹¥æ— æ³•å‘å¸ƒæ­£å¼ï¼Œå¯ä»¥å‘å¸ƒTestFlightç‰ˆæœ¬æµ‹è¯•</li></ol><h2 id="Xcode-11æ‰“åŒ…ä¸Šä¼ æ—¶ï¼Œä¸€ç›´å¡åœ¨Authenticating-with-the-App-Storeâ€¦">Xcode 11æ‰“åŒ…ä¸Šä¼ æ—¶ï¼Œä¸€ç›´å¡åœ¨Authenticating with the App Storeâ€¦</h2><ol><li>xcode <code>shift+command+k</code> æ¸…é™¤ç¼“å­˜</li><li><code> open ~/Library/Caches/com.apple.amp.itmstransporter/</code> åˆ é™¤æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶</li><li><code> /Applications/Xcode.app/Contents/SharedFrameworks/ContentDeliveryServices.framework/Versions/A/itms/bin/iTMSTransporter</code> åœ¨ç»ˆç«¯è¾“å…¥ ï¼ˆäº²æµ‹åœ¨è¿™é‡Œæ‰“å¼€VPNä¼šå¿«å¾ˆå¤šï¼Œä¸‹è½½å†…å®¹å¤§æ¦‚60M+ï¼‰<a href="https://pan.baidu.com/s/1ZiLIsuGRBIV1Wv8XVR_uVg">ç™¾åº¦äº‘</a> [wk8u]</li><li>ä¸‹è½½å®Œåï¼Œé‡å¯Xcode</li></ol><h2 id="è®¾ç½®æ¨é€è¯ä¹¦ï¼ˆä¸¤ç§æ–¹å¼">è®¾ç½®æ¨é€è¯ä¹¦ï¼ˆä¸¤ç§æ–¹å¼</h2><h3 id="token-Authentication">token Authentication</h3><p>åˆ›å»ºAPNsæ¨é€æœåŠ¡Keyã€‚<code>Certificates, Identifiers &amp; Profiles</code> -&gt; <code>Keys</code> -&gt; <code>JPush Auth Key</code></p><p>âš ï¸ä¸‹è½½å®Œæˆçš„æ˜¯ä¸€ä¸ª<code>.p8</code>æ–‡ä»¶ï¼Œåªå…è®¸ä¸‹è½½ä¸€æ¬¡ï¼Œæ³¨æ„ä¿å­˜</p><h3 id="è¯ä¹¦">è¯ä¹¦</h3><p><code>Certificates, Identifiers &amp; Profiles</code> -&gt; <code>Identifiers</code> -&gt; <code>æŒ‡å®šBundle ID</code> -&gt; <code>å‹¾é€‰å¹¶é…ç½® Push Notifications</code> -&gt; <code>Production SSL Certificate</code> -&gt; ä¸‹è½½<code>.cer</code>è¯ä¹¦å®‰è£…</p><p>åœ¨é’¥åŒ™ä¸²ä¸­å¯¼å‡º<code>Apple Push Services: Bundle ID</code>ä¸º<code>.p12</code>ï¼›æœ€å¥½è®¾ç½®ä¸€ä¸‹å¯†ç </p><h2 id="fix-Code-signing-â€œ-frameworkâ€-failed-IPA-processing-failed-è¯·ä½¿ç”¨xcframeworké‡æ„framework"><s>fix Code signing â€œ.frameworkâ€ failed;IPA processing failed</s> è¯·ä½¿ç”¨xcframeworké‡æ„framework</h2><p>add as (New Run Script Phase)</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Type a script or drag a script file from your workspace to insert its path.</span></span><br><span class="line">APP_PATH="${TARGET_BUILD_DIR}/${WRAPPER_NAME}"</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This script loops through the frameworks embedded <span class="keyword">in</span> the application and</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> removes unused architectures.</span></span><br><span class="line"></span><br><span class="line">find "$APP_PATH" -name '*.framework' -type d | while read -r FRAMEWORK</span><br><span class="line"></span><br><span class="line">do</span><br><span class="line"></span><br><span class="line">FRAMEWORK_EXECUTABLE_NAME=$(defaults read "$FRAMEWORK/Info.plist" CFBundleExecutable)</span><br><span class="line"></span><br><span class="line">FRAMEWORK_EXECUTABLE_PATH="$FRAMEWORK/$FRAMEWORK_EXECUTABLE_NAME"</span><br><span class="line"></span><br><span class="line">echo "Executable is $FRAMEWORK_EXECUTABLE_PATH"</span><br><span class="line"></span><br><span class="line">EXTRACTED_ARCHS=()</span><br><span class="line"></span><br><span class="line">for ARCH in $ARCHS</span><br><span class="line"></span><br><span class="line">do</span><br><span class="line"></span><br><span class="line">echo "Extracting $ARCH from $FRAMEWORK_EXECUTABLE_NAME"</span><br><span class="line"></span><br><span class="line">lipo -extract "$ARCH" "$FRAMEWORK_EXECUTABLE_PATH" -o "$FRAMEWORK_EXECUTABLE_PATH-$ARCH"</span><br><span class="line"></span><br><span class="line">EXTRACTED_ARCHS+=("$FRAMEWORK_EXECUTABLE_PATH-$ARCH")</span><br><span class="line"></span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo "Merging extracted architectures: ${ARCHS}"</span><br><span class="line"></span><br><span class="line">lipo -o "$FRAMEWORK_EXECUTABLE_PATH-merged" -create "${EXTRACTED_ARCHS[@]}"</span><br><span class="line"></span><br><span class="line">rm "${EXTRACTED_ARCHS[@]}"</span><br><span class="line"></span><br><span class="line">echo "Replacing original executable with thinned version"</span><br><span class="line"></span><br><span class="line">rm "$FRAMEWORK_EXECUTABLE_PATH"</span><br><span class="line"></span><br><span class="line">mv "$FRAMEWORK_EXECUTABLE_PATH-merged" "$FRAMEWORK_EXECUTABLE_PATH"</span><br><span class="line"></span><br><span class="line">done</span><br></pre></td></tr></tbody></table></figure><h2 id="Xcodeé…ç½®">Xcodeé…ç½®</h2><h3 id="ä¿®æ”¹ç±»çš„Copyrightã€ç±»å‰ç¼€">ä¿®æ”¹ç±»çš„Copyrightã€ç±»å‰ç¼€</h3><p>TARGETS -&gt; General -&gt; File inspector(right panel) -&gt; Project Document ä¸‹å°±æœ‰ç‰ˆæƒä¿¡æ¯å’Œå‰ç¼€ä¿®æ”¹</p><h3 id="ä¿®æ”¹é»˜è®¤è¯­è¨€ä¸ºä¸­æ–‡">ä¿®æ”¹é»˜è®¤è¯­è¨€ä¸ºä¸­æ–‡</h3><ol><li><code>info.plist</code> æ·»åŠ æˆ–è€…ä¿®æ”¹<code>Localization native development region</code>å€¼ä¸º<code>China</code>ï¼›<code> localized resources can be mixed</code>å€¼ä¸º<code>yes</code></li><li>PROJECT -&gt; info -&gt; æ·»åŠ ç®€ä½“ä¸­æ–‡è¯­è¨€åŒ…</li><li>å³å‡»<code>.xcodeproj</code>æ˜¾ç¤ºåŒ…å†…å®¹ï¼Œä¿®æ”¹<code>project.pbxproj</code>ä¸­çš„<code>developmentRegion</code>ä¸º<code>zh-Hans</code></li><li>åˆ é™¤è‹±æ–‡è¯­è¨€åŒ…åè‹¥éœ€è¦å†æ·»åŠ ï¼Œç¡®ä¿ä¸­æ–‡è¯­è¨€åŒ…åœ¨é¦–ä½</li></ol><h1>Swift ç¬”è®°</h1><h2 id="è§†å›¾">è§†å›¾</h2><h3 id="è‡ªé€‚åº”å®¹å™¨çš„é«˜åº¦">è‡ªé€‚åº”å®¹å™¨çš„é«˜åº¦</h3><p><strong>ä¸€ä¸ªè§†å›¾ï¼ŒåŒ…å«nä¸ªå­è§†å›¾ï¼Œå¦‚ä½•æ‰èƒ½è‡ªé€‚åº”é«˜åº¦å‘¢ï¼Ÿ</strong></p><ol><li>ç¬¬ä¸€ä¸ªå­è§†å›¾é¡¶éƒ¨å¯¹é½çˆ¶è§†å›¾</li><li>æœ€åä¸€ä¸ªå­è§†å›¾åº•éƒ¨å¯¹é½çˆ¶è§†å›¾</li><li>å…¶ä½™çš„å­è§†å›¾é¡¶éƒ¨ä¾æ¬¡å¯¹å…¶ä¸Šä¸€ä¸ªå­è§†å›¾çš„åº•éƒ¨</li></ol><p>åŒç†ï¼Œæ¨ªå‘æ”¹æˆå·¦è¾¹/å³è¾¹å¯¹é½</p><h3 id="ç±»ä¼¼å¾®ä¿¡ç›¸å†Œçš„ç¿»è½¬åŠ¨ç”»">ç±»ä¼¼å¾®ä¿¡ç›¸å†Œçš„ç¿»è½¬åŠ¨ç”»</h3><ol><li>é¢„è§ˆé¡µ</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.navigationController<span class="operator">?</span>.pushViewController(vc, animated: <span class="literal">false</span>)</span><br><span class="line"><span class="comment">// è®¾ç½®ç¿»é¡µåŠ¨ç”»ä¸ºä»å³è¾¹ç¿»ä¸Šæ¥</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> view <span class="operator">=</span> <span class="keyword">self</span>.navigationController<span class="operator">?</span>.view {</span><br><span class="line">    <span class="type">UIView</span>.transition(with: view, duration: <span class="number">1</span>, options: .transitionFlipFromRight, animations: <span class="literal">nil</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>ä»<code>vc</code>é¡µè·³å›</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">done</span>()</span> {</span><br><span class="line">    <span class="comment">// è®¾ç½®ç¿»è½¬åŠ¨ç”»ä¸ºä»å·¦è¾¹ç¿»ä¸Šæ¥</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> view <span class="operator">=</span> navigationController<span class="operator">?</span>.view {</span><br><span class="line">        <span class="type">UIView</span>.transition(with: view, duration: <span class="number">1</span>, options: .transitionFlipFromLeft, animations: <span class="literal">nil</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">self</span>.navigationController<span class="operator">?</span>.popViewController(animated: <span class="literal">false</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>æ”¹å˜åŠ¨ç”»æ—¶èƒŒæ™¯ä¸ºé»‘è‰²</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">view.backgroundColor <span class="operator">=</span> .black</span><br><span class="line">æˆ–è€…</span><br><span class="line"><span class="type">UIApplication</span>.shared.keyWindow<span class="operator">?</span>.backgroundColor <span class="operator">=</span> .black</span><br></pre></td></tr></tbody></table></figure><h3 id="CALayer-Core-Animation"><a href="http://www.cnblogs.com/kenshincui/p/3972100.html">CALayer &amp; Core Animation</a></h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»æŒ‰é’®å¼¹æ€§åŠ¨ç”»</span></span><br><span class="line"><span class="keyword">let</span> animation: <span class="type">CAKeyframeAnimation</span> <span class="operator">=</span> <span class="type">CAKeyframeAnimation</span>()</span><br><span class="line">animation.keyPath <span class="operator">=</span> <span class="string">"transform.scale"</span></span><br><span class="line">animation.values <span class="operator">=</span> [<span class="number">1.0</span>, <span class="number">1.3</span>, <span class="number">0.9</span>, <span class="number">1.0</span>]</span><br><span class="line">animation.duration <span class="operator">=</span> <span class="number">0.25</span></span><br><span class="line">animation.calculationMode <span class="operator">=</span> kCAAnimationCubic</span><br><span class="line">btn.layer.add(animation, forKey: <span class="literal">nil</span>)</span><br></pre></td></tr></tbody></table></figure><h3 id="UIView-å’Œ-XIB-çš„ç›¸å…³æ‰§è¡Œé¡ºåº">UIView å’Œ XIB çš„ç›¸å…³æ‰§è¡Œé¡ºåº</h3><p>åœ¨controllerä¸­é€šè¿‡ç±»æ–¹æ³•è·å¾—ä¸€ä¸ªå…³è”çš„UIViewï¼ˆplayView.swiftï¼.xibï¼‰å¯¹è±¡ï¼Œå…¶æ‰§è¡Œé¡ºåºä¸ºï¼š</p><ol><li>ç”± instantiate æ–¹æ³•è·å¾—è§†å›¾å¯¹è±¡ï¼šlet v = nib.instantiate(withOwner: self, options: nil)[0] as! PlayView</li><li>æœŸé—´ instantiate æ–¹æ³•è°ƒç”¨ awakeFromNib() æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œæ‰§è¡Œå®Œåå†æ¥ç€æ‰§è¡Œ instantiate æ–¹æ³•åé¢çš„æ­¥éª¤</li><li>æ‰§è¡Œå®Œè·å¾—UIViewå¯¹è±¡çš„ç±»æ–¹æ³•åï¼Œåœ¨æ‰§è¡Œ layoutSubviews() è®¾ç½®è§†å›¾å¤§å°</li></ol><h3 id="UIViewçš„setNeedsLayout-layoutIfNeeded-å’Œ-layoutSubviews-æ–¹æ³•ä¹‹é—´çš„å…³ç³»è§£é‡Š">UIViewçš„setNeedsLayout, layoutIfNeeded å’Œ layoutSubviews æ–¹æ³•ä¹‹é—´çš„å…³ç³»è§£é‡Š</h3><ul><li>layoutSubviewsåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¼šè¢«è°ƒç”¨ï¼š</li></ul><ol><li>initåˆå§‹åŒ–ä¸ä¼šè§¦å‘layoutSubviews<br>ä½†æ˜¯æ˜¯ç”¨initWithFrame è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œå½“rectçš„å€¼ä¸ä¸ºCGRectZeroæ—¶,ä¹Ÿä¼šè§¦å‘</li><li>addSubviewä¼šè§¦å‘layoutSubviews</li><li>è®¾ç½®viewçš„Frameä¼šè§¦å‘layoutSubviewsï¼Œå½“ç„¶å‰ææ˜¯frameçš„å€¼è®¾ç½®å‰åå‘ç”Ÿäº†å˜åŒ–</li><li>æ»šåŠ¨ä¸€ä¸ªUIScrollViewä¼šè§¦å‘layoutSubviews</li><li>æ—‹è½¬Screenä¼šè§¦å‘çˆ¶UIViewä¸Šçš„layoutSubviewsäº‹ä»¶</li><li>æ”¹å˜ä¸€ä¸ªUIViewå¤§å°çš„æ—¶å€™ä¹Ÿä¼šè§¦å‘çˆ¶UIViewä¸Šçš„layoutSubviewsäº‹ä»¶</li></ol><ul><li>åˆ·æ–°å­å¯¹è±¡å¸ƒå±€ï¼š</li></ul><ol><li>layoutSubviewsæ–¹æ³•ï¼šè¿™ä¸ªæ–¹æ³•ï¼Œé»˜è®¤æ²¡æœ‰åšä»»ä½•äº‹æƒ…ï¼Œéœ€è¦å­ç±»è¿›è¡Œé‡å†™</li><li>setNeedsLayoutæ–¹æ³•ï¼š æ ‡è®°ä¸ºéœ€è¦é‡æ–°å¸ƒå±€ï¼Œå¼‚æ­¥è°ƒç”¨layoutIfNeededåˆ·æ–°å¸ƒå±€ï¼Œä¸ç«‹å³åˆ·æ–°ï¼Œä½†layoutSubviewsä¸€å®šä¼šè¢«è°ƒç”¨</li><li>layoutIfNeededæ–¹æ³•ï¼šå¦‚æœï¼Œæœ‰éœ€è¦åˆ·æ–°çš„æ ‡è®°ï¼Œç«‹å³è°ƒç”¨layoutSubviewsè¿›è¡Œå¸ƒå±€ï¼ˆå¦‚æœæ²¡æœ‰æ ‡è®°ï¼Œä¸ä¼šè°ƒç”¨layoutSubviewsï¼‰</li><li>å¦‚æœè¦ç«‹å³åˆ·æ–°ï¼Œè¦å…ˆè°ƒç”¨[view setNeedsLayout]ï¼ŒæŠŠæ ‡è®°è®¾ä¸ºéœ€è¦å¸ƒå±€ï¼Œç„¶åé©¬ä¸Šè°ƒç”¨[view layoutIfNeeded]ï¼Œå®ç°å¸ƒå±€</li></ol><h3 id="è¯­è¨€å›½é™…åŒ–">è¯­è¨€å›½é™…åŒ–</h3><ol><li>åœ¨<code>PROJECT</code> -&gt; <code>Info</code> -&gt; <code>Localizations</code> æ·»åŠ æƒ³è¦é€‚é…çš„è¯­è¨€ã€‚é€‰ä¸­åå»æ‰stroyboardçš„å‹¾é€‰å»æ‰</li><li>åœ¨å·¥ç¨‹æ–‡ä»¶ä¸­åˆ›å»ºæ–°çš„æ–‡ä»¶å³é”®<code>New File</code> -&gt; <code>Resource</code> -&gt; <code>Strings File</code>ï¼Œå–åä¸º<code>Localizable.strings</code></li><li><code>.strings</code>ä¸‹ä¼šå¤šå‡ºä¸¤ä¸ªå­—æ–‡ä»¶ï¼Œåˆ†åˆ«å¯¹åº”è‹±æ–‡å’Œä¸­æ–‡çš„Stringsã€‚å¦‚æœæ²¡æœ‰ï¼Œåªéœ€åœ¨å³ä¾§æ§åˆ¶æ çš„<code>inspector</code>-&gt;<code>Localization</code>ç‚¹å‡»æœ¬åœ°åŒ–å³å¯</li><li>åˆ†åˆ«ç¼–å†™è¯­è¨€å‚æ•°ï¼ˆæ³¨æ„ï¼šç»“å°¾è¦æœ‰<strong>åˆ†å·<code>;</code></strong>ï¼‰</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"hello"</span> <span class="operator">=</span> <span class="string">"ä½ å¥½"</span>; <span class="comment">//ä¸­æ–‡Strings</span></span><br><span class="line"><span class="string">"hello"</span> <span class="operator">=</span> <span class="string">"hello"</span>; <span class="comment">//è‹±æ–‡Strings</span></span><br></pre></td></tr></tbody></table></figure><ol start="5"><li>è·å–å‚æ•°å€¼</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NSLocalizedString</span>(<span class="string">"hello"</span>, comment: <span class="string">"default"</span>) <span class="comment">//å¾—åˆ°helloå¯¹åº”çš„å€¼</span></span><br></pre></td></tr></tbody></table></figure><ol start="6"><li>å¿«æ·ä½¿ç”¨ã€‚æ–°å»º<code>Localizable.swift</code>ï¼Œå£°æ˜å¤šè¯­è¨€æ–‡å­—</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Localizable</span>: <span class="title">String</span> </span>{</span><br><span class="line">    <span class="keyword">case</span> hello</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> localized: <span class="type">String</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="type">NSLocalizedString</span>(rawValue, comment: <span class="string">""</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Localizable</span>.hello.localized)</span><br></pre></td></tr></tbody></table></figure><ol start="7"><li>è‹¥æƒ³ä¿®æ”¹é¡¹ç›®æ˜¾ç¤ºåç§°ï¼Œåˆ™åˆ›å»º<code>InfoPlist.strings</code>æ–‡ä»¶ã€‚åªéœ€åœ¨å³ä¾§æ§åˆ¶æ çš„<code>inspector</code>-&gt;<code>Localization</code>ç‚¹å‡»æœ¬åœ°åŒ–å³å¯</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">CFBundleDisplayName</span> <span class="operator">=</span> <span class="string">"project-name"</span>;</span><br></pre></td></tr></tbody></table></figure><h3 id="Xcode-æœ¬åœ°åŒ–-ä¿®æ”¹é»˜è®¤çš„å¼€å‘è¯­è¨€">Xcode æœ¬åœ°åŒ– ä¿®æ”¹é»˜è®¤çš„å¼€å‘è¯­è¨€</h3><ol><li><code>PROJECT</code> -&gt; <code>Info</code> -&gt; <code>Localizations</code>æ·»åŠ ä¸­æ–‡ç®€ä½“è¯­è¨€</li><li>åœ¨<code>Info.plist</code>ä¸­æŸ¥æ‰¾å¹¶è®¾ç½®<code>Localization Native Development Region</code>å€¼ä¸º<code>China</code></li><li>å…³é—­Xcodeï¼Œå³å‡»<code>.xcodeproj</code>æ˜¾ç¤ºåŒ…å†…å®¹ï¼Œä»¥æ–‡æœ¬å½¢å¼æ‰“å¼€<code>project.pbxproj</code>æ–‡ä»¶ï¼ŒæŸ¥æ‰¾å¹¶æ›¿æ¢<code>developmentRegion</code>å±æ€§å€¼ä¸º<code>zh-Hans</code></li><li>ï¼ˆå¯é€‰ï¼‰çœ‹æƒ…å†µåˆ é™¤<code>knownRegions</code>æ•°ç»„é‡Œçš„å­—æ®µ</li><li>ä¿å­˜åé‡å¯Xcodeå³å¯çœ‹åˆ°é»˜è®¤è¯­è¨€å˜æ›´ä¸ºä¸­æ–‡ç®€ä½“</li></ol><h3 id="AVPlayerè·å–å½“å‰æ—¶é—´æˆ³æˆªå›¾">AVPlayerè·å–å½“å‰æ—¶é—´æˆ³æˆªå›¾</h3><ol><li>å£°æ˜</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">var</span> player: <span class="type">AVPlayer</span>!</span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">var</span> playerItem: <span class="type">AVPlayerItem</span>?</span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">var</span> playerLayer: <span class="type">AVPlayerLayer</span>!</span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">var</span> videoOutput: <span class="type">AVPlayerItemVideoOutput</span> <span class="operator">=</span> <span class="type">AVPlayerItemVideoOutput</span>()</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>åˆå§‹åŒ–æ’­æ”¾æ§åˆ¶url</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">playerItem <span class="operator">=</span> <span class="type">AVPlayerItem</span>(url: withURL)</span><br><span class="line">playerItem<span class="operator">?</span>.add(videoOutput)</span><br><span class="line">player.replaceCurrentItem(with: playerItem)</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>è·å–æˆªå›¾</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// è·å–å½“å‰æ—¶é—´çš„æˆªå›¾</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getCurrentImage</span>()</span> -&gt;<span class="type">UIImage</span>?{</span><br><span class="line">    <span class="keyword">let</span> itemTime <span class="operator">=</span> player.currentItem<span class="operator">?</span>.currentTime()</span><br><span class="line">    <span class="keyword">let</span> pixelBuffers <span class="operator">=</span> videoOutput.copyPixelBuffer(forItemTime: itemTime<span class="operator">!</span>, itemTimeForDisplay: <span class="literal">nil</span>)</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> pixelBuffer <span class="operator">=</span> pixelBuffers <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">let</span> ciImage <span class="operator">=</span> <span class="type">CIImage</span>(cvPixelBuffer: pixelBuffer)</span><br><span class="line">    <span class="keyword">let</span> temporaryContext <span class="operator">=</span> <span class="type">CIContext</span>()</span><br><span class="line">    <span class="keyword">let</span> videoImage <span class="operator">=</span> temporaryContext.createCGImage(ciImage, from: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="type">CVPixelBufferGetWidth</span>(pixelBuffer), height: <span class="type">CVPixelBufferGetHeight</span>(pixelBuffer)))</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> image <span class="operator">=</span> videoImage <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="type">UIImage</span>(cgImage: image)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="å±å¹•æ–¹å‘æ§åˆ¶ï¼šåªå…è®¸éƒ¨åˆ†æ¨ªå±-info-plistä¸­åªæ”¯æŒç«–å±">å±å¹•æ–¹å‘æ§åˆ¶ï¼šåªå…è®¸éƒ¨åˆ†æ¨ªå±(info.plistä¸­åªæ”¯æŒç«–å±)</h3><ol><li><code>AppDelegate</code>æ˜¯å¦å…è®¸æ¨ªå±</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// æ˜¯å¦é”å®šç«–å± é»˜è®¤ true</span></span><br><span class="line"><span class="keyword">var</span> isBlock <span class="operator">=</span> <span class="literal">true</span> {</span><br><span class="line">    <span class="keyword">didSet</span> {</span><br><span class="line">        <span class="keyword">if</span> isBlock {</span><br><span class="line">            changeOrientation(fullScreen: <span class="operator">!</span>isBlock)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span>(<span class="keyword">_</span> <span class="params">application</span>: <span class="type">UIApplication</span>, <span class="params">supportedInterfaceOrientationsFor</span> <span class="params">window</span>: <span class="type">UIWindow</span>?)</span> -&gt; <span class="type">UIInterfaceOrientationMask</span> {</span><br><span class="line">    <span class="keyword">return</span> isBlock <span class="operator">?</span> .portrait : .allButUpsideDown</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/// æ¨ªç«–å±åˆ‡æ¢</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeOrientation</span>(<span class="params">fullScreen</span>: <span class="type">Bool</span>)</span> {</span><br><span class="line">    <span class="keyword">if</span> fullScreen { <span class="comment">//æ¨ªå±</span></span><br><span class="line">        <span class="keyword">if</span> <span class="type">UIApplication</span>.shared.statusBarOrientation.isLandscape {</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">let</span> resetOrientationTargert <span class="operator">=</span> <span class="type">NSNumber</span>(integerLiteral: <span class="type">UIInterfaceOrientation</span>.unknown.rawValue)</span><br><span class="line">        <span class="type">UIDevice</span>.current.setValue(resetOrientationTargert, forKey: <span class="string">"orientation"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> orientationTarget <span class="operator">=</span> <span class="type">NSNumber</span>(integerLiteral: <span class="type">UIInterfaceOrientation</span>.landscapeRight.rawValue)</span><br><span class="line">        <span class="type">UIDevice</span>.current.setValue(orientationTarget, forKey: <span class="string">"orientation"</span>)</span><br><span class="line"></span><br><span class="line">    }<span class="keyword">else</span> { <span class="comment">//ç«–å±</span></span><br><span class="line">        <span class="keyword">if</span> <span class="type">UIApplication</span>.shared.statusBarOrientation.isPortrait {</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">let</span> resetOrientationTargert <span class="operator">=</span> <span class="type">NSNumber</span>(integerLiteral: <span class="type">UIInterfaceOrientation</span>.unknown.rawValue)</span><br><span class="line">        <span class="type">UIDevice</span>.current.setValue(resetOrientationTargert, forKey: <span class="string">"orientation"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> orientationTarget <span class="operator">=</span> <span class="type">NSNumber</span>(integerLiteral: <span class="type">UIInterfaceOrientation</span>.portrait.rawValue)</span><br><span class="line">        <span class="type">UIDevice</span>.current.setValue(orientationTarget, forKey: <span class="string">"orientation"</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>éœ€è¦æ¨ªå±çš„Controllerä¸­è®¾ç½®å…è®¸æ¨ªå±</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// viewWillAppear</span></span><br><span class="line"><span class="keyword">let</span> delegate <span class="operator">=</span> <span class="type">UIApplication</span>.shared.delegate <span class="keyword">as!</span> <span class="type">AppDelegate</span></span><br><span class="line">delegate.isBlock <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">// âš ï¸æ§åˆ¶å™¨ç»“æŸåéœ€è¦å°†æ¨ªå±ç¦æ­¢(viewDidDisappear)</span></span><br><span class="line">delegate.isBlock <span class="operator">=</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>å¦‚éœ€æ§åˆ¶ä¼˜å…ˆæ˜¾ç¤ºæ–¹å‘ï¼Œæ”¹å˜æ’åºå³å¯</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">UISupportedInterfaceOrientations</span>&lt;/key&gt;</span><br><span class="line"><span class="operator">&lt;</span>array<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">UIInterfaceOrientationLandscapeRight</span>&lt;/string&gt;</span><br><span class="line"><span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">UIInterfaceOrientationLandscapeLeft</span>&lt;/string&gt;</span><br><span class="line"><span class="operator">&lt;/</span>array<span class="operator">&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ç›‘å¬é”å±-è§£é”é€šçŸ¥">ç›‘å¬é”å±/è§£é”é€šçŸ¥</h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span> </span>{</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> isLockScreenKey <span class="operator">=</span> <span class="string">"isLockScreenKey"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationProtectedDataWillBecomeUnavailable</span>(<span class="keyword">_</span> <span class="params">application</span>: <span class="type">UIApplication</span>)</span> {</span><br><span class="line">        <span class="type">NotificationCenter</span>.default.post(name: .<span class="type">ScreenLockStateChanged</span>, object: <span class="literal">nil</span>, userInfo: [<span class="type">AppDelegate</span>.isLockScreenKey: <span class="literal">true</span>])</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">applicationProtectedDataDidBecomeAvailable</span>(<span class="keyword">_</span> <span class="params">application</span>: <span class="type">UIApplication</span>)</span> {</span><br><span class="line">        <span class="type">NotificationCenter</span>.default.post(name: .<span class="type">ScreenLockStateChanged</span>, object: <span class="literal">nil</span>, userInfo: [<span class="type">AppDelegate</span>.isLockScreenKey: <span class="literal">false</span>])</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">Notification</span>.<span class="title">Name</span> </span>{</span><br><span class="line">    <span class="comment">/// å±å¹•çŠ¶æ€é€šçŸ¥</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> <span class="type">ScreenLockStateChanged</span> <span class="operator">=</span> <span class="type">Notification</span>.<span class="type">Name</span>(<span class="string">"ScreenLockStateChanged"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="AVPlayerå®ç°è§†é¢‘åå°æ’­æ”¾">AVPlayerå®ç°è§†é¢‘åå°æ’­æ”¾</h3><p>å¯¹äºå®ç°åå°æ’­æ”¾è§†é¢‘çš„æ–¹æ³•ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼ŒiOS æ˜¯æ”¯æŒåå°æ’­æ”¾éŸ³é¢‘çš„ï¼Œè€Œ AVPlayer åœ¨æ’­æ”¾è§†é¢‘æ—¶ï¼Œä¼šå°†å›¾åƒæ¸²æŸ“åœ¨ layer ä¸Šï¼Œå› æ­¤åªè¦å–æ¶ˆå›¾åƒçš„æ¸²æŸ“ï¼Œåªæ’­æ”¾éŸ³é¢‘ï¼Œå°±å¯ä»¥å®ç°åå°æ’­æ”¾ã€‚</p><ol><li>åœ¨<code>info.plist</code>æ–‡ä»¶ä¸­æ·»åŠ æƒé™</li></ol><figure class="highlight plist"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>UIBackgroundModes<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>audio<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>NSAppTransportSecurity<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>NSAllowsArbitraryLoads<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>åœ¨æ’­æ”¾æ§åˆ¶ç±»ä¸­æ·»åŠ ç›‘å¬<code>(ä»ç›¸å…³çš„AVPlayeråˆ é™¤AVPlayer(å°†AVPlayerLayer playerå±æ€§è®¾ç½®ä¸ºnil))</code></li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isVideoBackground</span>()</span> {</span><br><span class="line">    <span class="type">NotificationCenter</span>.default.addObserver(<span class="keyword">self</span>, selector: #selector(enterBackground), name: <span class="type">UIApplication</span>.didEnterBackgroundNotification, object: <span class="literal">nil</span>)</span><br><span class="line">    <span class="type">NotificationCenter</span>.default.addObserver(<span class="keyword">self</span>, selector: #selector(willForeground), name: <span class="type">UIApplication</span>.willEnterForegroundNotification, object: <span class="literal">nil</span>)</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">enterBackground</span>()</span> {</span><br><span class="line">    <span class="comment">// _player æ˜¯å½“å‰æ’­æ”¾AVPlayerå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// _player = nil;</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">willForeground</span>()</span> {</span><br><span class="line">    <span class="comment">// temp æ˜¯_playerçš„æ‹·è´</span></span><br><span class="line">    <span class="comment">// _player = temp;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="AVPlayer-å®ç°å€é€Ÿæ’­æ”¾">AVPlayer å®ç°å€é€Ÿæ’­æ”¾</h3><ol><li>å®šä¹‰å˜é‡<code>rate</code>ä¿å­˜å½“å‰å€é€Ÿ</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// æ’­æ”¾é€Ÿç‡</span></span><br><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> rate: <span class="type">Float</span> <span class="operator">=</span> <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">didSet</span> {</span><br><span class="line">        queue.rate <span class="operator">=</span> rate</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>æ¯å½“æš‚åœåæ’­æ”¾ï¼Œéƒ½éœ€è¦è®¾ç½®<code>rate</code>ï¼Œå› ä¸ºæš‚åœ/æ’­æ”¾éƒ½ä¼šä¿®æ”¹<code>rate</code>å€¼ä¸º<code>0/1</code></li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">play</span>()</span> {</span><br><span class="line">    queue.play()</span><br><span class="line">    queue.rate <span class="operator">=</span> rate</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="é€»è¾‘">é€»è¾‘</h2><h3 id="NSNotificationé€šçŸ¥çš„ä½¿ç”¨">NSNotificationé€šçŸ¥çš„ä½¿ç”¨</h3><ol><li>æ–¹å¼ä¸€ï¼š<ol><li>è‡ªå®šä¹‰é€šçŸ¥ç±»å‹</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="type">WBUserShouldLoginNotification</span> <span class="operator">=</span> â€œ<span class="type">WBUserShouldLoginNotification</span><span class="string">"</span></span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å‘é€é€šçŸ¥</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NotificationCenter</span>.default.post(name: <span class="type">NSNotification</span>.<span class="type">Name</span>(rawValue: <span class="type">WBUserShouldLoginNotification</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>æ³¨å†Œ é€šçŸ¥ç›‘å¬</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NotificationCenter</span>.default.addObserver(<span class="keyword">self</span>, selector: #selector(notificationMethod(n:)), name: <span class="type">NSNotification</span>.<span class="type">Name</span>(rawValue: <span class="type">WBUserShouldLoginNotification</span>), object: <span class="literal">nil</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li>å¤„ç†é€šçŸ¥çš„æ–¹æ³•</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@objc</span> <span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">notificationMethod</span>(<span class="params">n</span>: <span class="type">Notification</span>)</span>{</span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="5"><li>æ³¨é”€ é€šçŸ¥ç›‘å¬</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NotificationCenter</span>.default.removeObserver(<span class="keyword">self</span>)</span><br></pre></td></tr></tbody></table></figure></li><li>æ–¹å¼äºŒï¼šæ›´åŠ è´´è¿‘å®˜æ–¹æ–‡æ¡£<ol><li>è‡ªå®šä¹‰é€šçŸ¥ç±»å‹</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSNotification</span>.<span class="title">Name</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> <span class="type">XXXNotification</span> <span class="operator">=</span> <span class="type">NSNotification</span>.<span class="type">Name</span>(<span class="string">"XXXNotification"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å‘é€é€šçŸ¥</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NotificationCenter</span>.default.post(name: .<span class="type">XXXNotification</span>, object: <span class="literal">nil</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>æ³¨å†Œ é€šçŸ¥ç›‘å¬</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NotificationCenter</span>.default.addObserver(<span class="keyword">self</span>, selector: #selector(notificationMethod(n:)), name: .<span class="type">XXXNotification</span>, object: <span class="literal">nil</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li>å¤„ç†é€šçŸ¥çš„æ–¹æ³•</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@objc</span> <span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">notificationMethod</span>(<span class="params">n</span>: <span class="type">Notification</span>)</span>{</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> list <span class="operator">=</span> n.object <span class="keyword">as?</span> [<span class="type">Int</span>] <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="5"><li>æ³¨é”€ é€šçŸ¥ç›‘å¬</li></ol> <figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NotificationCenter</span>.default.removeObserver(<span class="keyword">self</span>)</span><br></pre></td></tr></tbody></table></figure></li></ol><h3 id="è‡ªå®šä¹‰é€‰æ‹©å™¨Selector">è‡ªå®šä¹‰é€‰æ‹©å™¨Selector</h3><ol><li>å£°æ˜<code>Selector</code></li><li>åˆ¤æ–­æ˜¯å¦ç»‘å®šé€‰æ‹©å™¨<code>responds(to:)</code></li><li>è§¦å‘é€‰æ‹©å™¨<code>perform(, with: )</code></li></ol><h3 id="extension-ä¹Ÿå¯ä»¥æ·»åŠ é™å®šæ¡ä»¶ï¼Œä½¿å¾—åªæœ‰ç‰¹å®šæƒ…å†µå®ç°-protocol-æ‰èƒ½è·å¾—é»˜è®¤å®ç°">extension ä¹Ÿå¯ä»¥æ·»åŠ é™å®šæ¡ä»¶ï¼Œä½¿å¾—åªæœ‰ç‰¹å®šæƒ…å†µå®ç° protocol æ‰èƒ½è·å¾—é»˜è®¤å®ç°</h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ForceTouchImagePreviewProtocol</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIView</span>  </span>{</span><br><span class="line">  <span class="comment">// åªé’ˆå¯¹ UIView çš„é»˜è®¤å®ç°ã€‚åœ¨è¿™ä¸ªå®ç°é‡Œï¼Œself ä¸º UIView ç±»å‹ï¼Œå¯ä»¥å¾—åˆ°ç›¸åº”å‚æ•°å’Œæ–¹æ³•ã€‚</span></span><br><span class="line">}</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> <span class="title">where</span> <span class="title">Element</span> :<span class="title">_ArrayType</span>, <span class="title">Element</span>.<span class="title">Generator</span>.<span class="title">Element</span> :<span class="title">Equatable</span>  </span>{</span><br><span class="line">  <span class="comment">// å¯¹ æ•°ç»„çš„æ•°ç»„ ç±»å‹çš„æ‰©å±•ï¼Œä¸”æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯ Equatable</span></span><br><span class="line">  <span class="comment">// å…¶å® Array ä¸æ˜¯ protocolã€‚ä½†å¯ä»¥çœ‹å‡ºå¯¹äº extension çš„ä½¿ç”¨ï¼Œå·²ç»ä¸éœ€è¦åŒºåˆ†æ˜¯ protocol è¿˜æ˜¯ class, struct, enum</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="OC-Swift-æ··ç¼–">OC &amp; Swift æ··ç¼–</h3><ol><li>Swift è°ƒç”¨ Objective-C<ol><li>æ¡¥æ¥æ–‡ä»¶ï¼ˆProjectName-Bridging-Header.hï¼‰ï¼šæ–°å»ºOCæ–‡ä»¶æ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ–°å»ºHeader fileåï¼Œåœ¨ Targetsâ€“&gt;Build Settingsâ€“&gt;Swift Compiler - Generalâ€“&gt;Objective-C Bridging Header é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆProjectName/ProjectName-Bridging-Header.hï¼‰</li><li>ä½¿ç”¨æ—¶åªéœ€åœ¨æ¡¥æ¥æ–‡ä»¶ä¸­å¯¼å…¥å¤´æ–‡ä»¶å³å¯å’Œ swift ä¸€æ ·ä½¿ç”¨</li></ol></li><li>Objective-C è°ƒç”¨ Swift<ol><li>é»˜è®¤æ¡¥æ¥æ–‡ä»¶ï¼ˆProjectName-Swift.hï¼‰ï¼šåœ¨ Targetsâ€“&gt;Build Settingsâ€“&gt;Swift Compiler - Generalâ€“&gt;Objective-C Generated Interface Header Name è¿›è¡Œé…ç½®ï¼Œé»˜è®¤æ–‡ä»¶åæ˜¯å·¥ç¨‹å-Swift.hï¼Œä¸€èˆ¬ä¸åšæ”¹åŠ¨</li><li>ä½¿ç”¨æ—¶é¦–å…ˆåœ¨OCæ–‡ä»¶ä¸­è¦åŠ ä¸Š #import â€œProjectName-Swift.hâ€(åå­—ç»„æˆ:å·¥ç¨‹å-Swift)</li></ol></li><li>æ··ç¼–æ³¨æ„äº‹é¡¹ï¼š</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºéœ€è¦æ··ç¼–çš„Swiftç±»æ·»åŠ @objcå£°æ˜æˆ–ç»§æ‰¿NSObjectæˆ–NSObjectçš„å­ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestClass</span> </span>{</span><br><span class="line">    <span class="operator">â€¦</span><span class="operator">..</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">// å¦‚æœè¦åœ¨Objective-Cç±»ä¸­ä½¿ç”¨TestClassç±»ï¼Œåº”å½“å°†TestClassç»§æ‰¿è‡ªNSObjectæˆ–NSObjectçš„å­ç±»ï¼Œå¦åˆ™ï¼Œå¼•å…¥ProductName-Swift.hä¹‹åï¼Œç¨‹åºæ‰¾ä¸åˆ°å¯¹åº”ç±»ã€‚</span></span><br></pre></td></tr></tbody></table></figure><ol start="4"><li>æ›´å¤š</li></ol><ul><li><a href="http://blog.csdn.net/zlj_jeck/article/details/51503937">è¯¦è§£swiftå’ŒOCä»¥åŠCè¯­è¨€çš„æ··ç¼–</a></li><li><a href="https://www.jianshu.com/p/ca7ccbf18d4e">Swift å’Œ C ä¸å¾—ä¸è¯´çš„æ•…äº‹</a></li><li><a href="https://www.cnblogs.com/XYQ-208910/p/5157673.html">iOS:Xcode7ä¸‹åˆ›å»º .aé™æ€åº“ å’Œ .frameworké™æ€åº“</a></li><li><a href="https://blog.csdn.net/gatieme/article/details/52730680">C++ä¸Cä¹‹é—´ç›¸äº’æ¥å£å’Œåº“å‡½æ•°è°ƒç”¨</a></li></ul><h3 id="æŒ‡é’ˆ">æŒ‡é’ˆ</h3><ul><li><a href="https://blog.csdn.net/zkh90644/article/details/52819002">Swift 3.0 ä¸­ä¸å®‰å…¨çš„ä¸–ç•Œ</a></li><li><a href="https://blog.csdn.net/qq_22879593/article/details/68945564">Swift3.0 æŒ‡é’ˆ</a></li><li><a href="https://www.jb51.net/article/103538.htm">Swiftä¸­çš„æŒ‡é’ˆæ“ä½œè¯¦è§£</a></li><li><a href="http://blog.csdn.net/zenny_chen/article/details/54846579">Swift 3.0ä¸Cè¯­è¨€æŒ‡é’ˆç±»å‹çš„æ¡¥æ¥</a></li></ul><h3 id="ç³»ç»Ÿæƒé™è®¾ç½®">ç³»ç»Ÿæƒé™è®¾ç½®</h3><p>å¸¸ç”¨çš„æƒé™:</p><table><thead><tr><th>è¯´æ˜</th><th>æƒé™</th><th>æè¿°</th></tr></thead><tbody><tr><td>éº¦å…‹é£æƒé™</td><td>Privacy - Microphone Usage Description</td><td>Appéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½è®¿é—®éº¦å…‹é£è¿›è¡Œè¯­éŸ³è¯†åˆ«è½¬æ¢/å½•åˆ¶éŸ³é¢‘ï¼Œå¦‚ç¦æ­¢å°†æ— æ³•è¯†åˆ«è¯­éŸ³è½¬æ¢/å½•åˆ¶éŸ³é¢‘å‘é€</td></tr><tr><td>ç›¸æœºæƒé™</td><td>Privacy - Camera Usage Description</td><td>APPéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½è®¿é—®ç›¸æœºè¿›è¡Œæ‹æ‘„/è¯†åˆ«/è§†é¢‘é€šè¯ï¼Œå¦‚ç¦æ­¢å°†æ— æ³•æ‹æ‘„/è¯†åˆ«å›¾ç‰‡ä»¥åŠè§†é¢‘é€šè¯</td></tr><tr><td>ä¿å­˜ç›¸å†Œæƒé™</td><td>Privacy - Photo Library Additions Usage Description</td><td>Appéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½å°†ç…§ç‰‡ä¿å­˜è‡³ç›¸å†Œï¼Œå¦‚ç¦æ­¢å°†æ— æ³•ä¿å­˜å›¾ç‰‡</td></tr><tr><td>ç›¸å†Œæƒé™</td><td>Privacy - Photo Library Usage Description</td><td>APPéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½è®¿é—®ç›¸å†Œè¿›è¡Œé€‰æ‹©ç…§ç‰‡ä¸Šä¼ /å‘å¸ƒä¿¡æ¯ï¼Œå¦‚ç¦æ­¢å°†æ— æ³•ä¸Šä¼ é€‰æ‹©ç…§ç‰‡ä¸Šä¼ /å‘å¸ƒä¿¡æ¯</td></tr><tr><td>é€šè®¯å½•æƒé™</td><td>Privacy - Contacts Usage Description</td><td>APPéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½è·å–é€šè®¯å½•å¥½å‹ï¼Œå¦‚ç¦æ­¢å°†æ— æ³•æŸ¥çœ‹</td></tr><tr><td>è“ç‰™æƒé™</td><td>Privacy - Bluetooth Peripheral Usage Description</td><td>APPéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½ä½¿ç”¨è“ç‰™æ’­æ”¾/æ§åˆ¶åŠŸèƒ½</td></tr><tr><td>è¯­éŸ³è½¬æ–‡å­—æƒé™</td><td>Privacy - Speech Recognition Usage Description</td><td>APPéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½ä½¿ç”¨è¯­éŸ³è¯†åˆ«ï¼Œå¦‚ç¦æ­¢å°†æ— æ³•è¯­éŸ³è½¬æ–‡å­—</td></tr><tr><td>æ—¥å†æƒé™</td><td>Privacy - Calendars Usage Description</td><td>APPéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½æ·»åŠ ä»»åŠ¡åˆ°æ—¥å†ï¼Œå¦‚ç¦æ­¢å°†æ— æ³•åœ¨æ—¥å†ä¸­æŸ¥çœ‹ä»»åŠ¡</td></tr><tr><td>å®šä½æƒé™</td><td>Privacy - Location When In Use Usage Description</td><td>APPéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½è®¿é—®å®šä½ä½ç½®å±•ç¤ºé™„è¿‘ä¿¡æ¯ï¼Œå¦‚ç¦æ­¢å°†æ— æ³•å±•ç¤ºé™„è¿‘ä¿¡æ¯</td></tr><tr><td>å®šä½æƒé™</td><td>Privacy - Location Always Usage Description</td><td>APPéœ€è¦æ‚¨çš„åŒæ„ï¼Œæ‰èƒ½è®¿é—®å®šä½ä½ç½®å±•ç¤ºé™„è¿‘ä¿¡æ¯ï¼Œå¦‚ç¦æ­¢å°†æ— æ³•å±•ç¤ºé™„è¿‘ä¿¡æ¯ <code>âš ï¸å¦‚éå¿…è¦ï¼Œä¸èƒ½ç”³è¯·è¯¥æƒé™</code></td></tr></tbody></table><blockquote><p>å®šä½çš„éœ€è¦è¿™ä¹ˆå†™ï¼Œé˜²æ­¢ä¸Šæ¶è¢«æ‹’ã€‚</p></blockquote><ul><li>ç½‘ç»œè®¿é—®æƒé™</li></ul><blockquote><p>App Transport Security Settings -&gt; Allow Arbitrary Loads (true)</p></blockquote><h3 id="è·å–ç³»ç»Ÿä¿¡æ¯">è·å–ç³»ç»Ÿä¿¡æ¯</h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// swift è·å–appç‰ˆæœ¬å·åŠ ios ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">versionCheck</span>()</span>{</span><br><span class="line">    <span class="keyword">let</span> infoDictionary <span class="operator">=</span> <span class="type">Bundle</span>.main.infoDictionary</span><br><span class="line">    <span class="keyword">let</span> appDisplayName <span class="operator">=</span> infoDictionary<span class="operator">!</span>[<span class="string">"CFBundleName"</span>]</span><br><span class="line">    <span class="keyword">let</span> majorVersion <span class="operator">=</span> infoDictionary<span class="operator">!</span>[<span class="string">"CFBundleShortVersionString"</span>] <span class="comment">// ä¸»ç¨‹åºç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="keyword">let</span> minorVersion <span class="operator">=</span> infoDictionary<span class="operator">!</span>[<span class="string">"CFBundleVersion"</span>] <span class="comment">// build ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="keyword">let</span> appversion <span class="operator">=</span> majorVersion <span class="keyword">as!</span> <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> iosversion <span class="operator">=</span> <span class="type">UIDevice</span>.current.systemVersion   <span class="comment">// ios ç‰ˆæœ¬</span></span><br><span class="line">    <span class="keyword">let</span> identifierNumber <span class="operator">=</span> <span class="type">UIDevice</span>.current.identifierForVendor   <span class="comment">// è®¾å¤‡ udid</span></span><br><span class="line">    <span class="keyword">let</span> deviceName <span class="operator">=</span> <span class="type">UIDevice</span>.current.name  <span class="comment">//è·å–è®¾å¤‡åç§°</span></span><br><span class="line">    <span class="keyword">let</span> systemName <span class="operator">=</span> <span class="type">UIDevice</span>.current.systemName   <span class="comment">// ç³»ç»Ÿè®¾å¤‡åç§°</span></span><br><span class="line">    <span class="keyword">let</span> model <span class="operator">=</span> <span class="type">UIDevice</span>.current.model   <span class="comment">// è®¾å¤‡å‹å·</span></span><br><span class="line">    <span class="keyword">let</span> localizedModel <span class="operator">=</span> <span class="type">UIDevice</span>.current.localizedModel   <span class="comment">// è®¾å¤‡åŒºåŸŸåŒ–å‹å· å¦‚ A1533</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"appDisplayName:<span class="subst">\(appDisplayName<span class="operator">!</span>)</span><span class="subst">\n</span>majorVersion:<span class="subst">\(majorVersion<span class="operator">!</span>)</span><span class="subst">\n</span>minorVersion:<span class="subst">\(minorVersion<span class="operator">!</span>)</span><span class="subst">\n</span>"</span>,</span><br><span class="line">        <span class="string">"appversion:<span class="subst">\(appversion)</span><span class="subst">\n</span>iosversion:<span class="subst">\(iosversion)</span><span class="subst">\n</span>identifierNumber:<span class="subst">\(identifierNumber<span class="operator">!</span>)</span><span class="subst">\n</span>systemName:<span class="subst">\(systemName)</span><span class="subst">\n</span>model:<span class="subst">\(model)</span><span class="subst">\n</span>localizedModel:<span class="subst">\(localizedModel)</span>"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="è·å–å½“å‰Wi-Fiå">è·å–å½“å‰Wi-Fiå</h3><p>åœ¨iOS 12 ä¹‹åéœ€è¦è®¾ç½®Xcode -&gt; [Project Name] -&gt; Targets -&gt; [Target Name] -&gt; Capabilities -&gt; Access WiFi Information -&gt; ON</p><p>åœ¨iOS 13 ä»¥åè·å–Wi-Fiéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€</p><ul><li>ä½¿ç”¨å®šä½åŠŸèƒ½ï¼Œå¹¶ä¸”è·å¾—äº†å®šä½æœåŠ¡æƒé™çš„åº”ç”¨ï¼›</li><li>ä½¿ç”¨NEHotspotConfigurationé…ç½®è¿‡çš„Wi-Fiï¼›</li><li>åº”ç”¨ç¨‹åºå·²å®‰è£…æœ‰æ•ˆçš„VPNé…ç½®</li></ul><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// è·å–å½“å‰Wi-Fiå</span></span><br><span class="line"><span class="comment">/// 1. #import &lt;SystemConfiguration/CaptiveNetwork.h&gt;</span></span><br><span class="line"><span class="comment">/// 2. Xcode -&gt; [Project Name] -&gt; Targets -&gt; [Target Name] -&gt; Capabilities -&gt; Access WiFi Information -&gt; ON</span></span><br><span class="line"><span class="comment">/// 3. iOS13ä»¥åå¿…é¡»å®šä½</span></span><br><span class="line"><span class="comment">/// ```swift</span></span><br><span class="line"><span class="comment">/// private let manager = CLLocationManager()</span></span><br><span class="line"><span class="comment">/// manager.requestWhenInUseAuthorization()</span></span><br><span class="line"><span class="comment">/// ```</span></span><br><span class="line"><span class="keyword">var</span> currentSSID: <span class="type">String</span> {</span><br><span class="line">    <span class="keyword">let</span> interfaces <span class="operator">=</span> <span class="type">CNCopySupportedInterfaces</span>()</span><br><span class="line">    <span class="keyword">var</span> ssid <span class="operator">=</span> <span class="string">""</span></span><br><span class="line">    <span class="keyword">if</span> interfaces <span class="operator">!=</span> <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">let</span> interfacesArray <span class="operator">=</span> <span class="type">CFBridgingRetain</span>(interfaces) <span class="keyword">as!</span> <span class="type">Array</span>&lt;<span class="type">AnyObject</span>&gt;</span><br><span class="line">        <span class="keyword">if</span> interfacesArray.count <span class="operator">&gt;</span> <span class="number">0</span> {</span><br><span class="line">            <span class="comment">//è·å–å½“å‰ä½¿ç”¨wifi</span></span><br><span class="line">            <span class="keyword">for</span> name <span class="keyword">in</span> interfacesArray {</span><br><span class="line">                <span class="keyword">let</span> interfaceName <span class="operator">=</span> name <span class="keyword">as!</span> <span class="type">CFString</span></span><br><span class="line">                <span class="keyword">let</span> ussafeInterfaceData <span class="operator">=</span> <span class="type">CNCopyCurrentNetworkInfo</span>(interfaceName)</span><br><span class="line">                <span class="keyword">if</span> (ussafeInterfaceData <span class="operator">!=</span> <span class="literal">nil</span>) {</span><br><span class="line">                    <span class="keyword">let</span> interfaceData <span class="operator">=</span> ussafeInterfaceData <span class="keyword">as!</span> [<span class="type">String</span>: <span class="keyword">Any</span>]</span><br><span class="line">                    ssid <span class="operator">=</span> interfaceData[<span class="string">"SSID"</span>]<span class="operator">!</span> <span class="keyword">as!</span> <span class="type">String</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ssid</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="å…³äº-Swift-ä¸­é‡å†™-preferredStatusBarStyle-ä¸èµ·ä½œç”¨é—®é¢˜è§£å†³æ–¹æ¡ˆ">å…³äº Swift ä¸­é‡å†™ preferredStatusBarStyle ä¸èµ·ä½œç”¨é—®é¢˜è§£å†³æ–¹æ¡ˆ</h3><ul><li>é¦–å…ˆéœ€è¦åœ¨é¡¹ç›®<code>targets</code>ä¸­çš„ <code>info.plist</code> æ–‡ä»¶ä¸­å°† <code>View controller-based status bar appearance</code> åˆ é™¤;</li><li>å¦‚æœ<code>UIViewController</code>æ˜¯å­˜åœ¨äºè‡ªå®šä¹‰çš„<code>UINavigationController</code>ä¸­ï¼Œéœ€è¦åœ¨è‡ªå®šä¹‰çš„<code>UINavigationController</code>ä¸­é‡å†™<code>childForStatusBarHidden</code>å’Œ<code>childForStatusBarStyle</code>ä¸¤ä¸ªæ–¹æ³•: å› ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•é»˜è®¤è¿”å›å€¼æ˜¯nil</li></ul><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> childForStatusBarHidden: <span class="type">UIViewController</span>? {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.topViewController</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> childForStatusBarStyle: <span class="type">UIViewController</span>? {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.topViewController</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="TableView">TableView</h2><h3 id="è‡ªå®šä¹‰cell">è‡ªå®šä¹‰cell</h3><ol><li>ä»xibåˆ›å»ºcell</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. æ–°å»ºä¸€ä¸ªç©ºçš„ TestCell.xib å’Œ TestCell.swift æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// 2. æŒ‡å®šxibçš„ Custom Class ä¸º TestCell</span></span><br><span class="line"><span class="comment">// 3. æ³¨å†Œxib</span></span><br><span class="line">table.register(<span class="type">UINib</span>(nibName: <span class="string">"TestCell"</span>, bundle: <span class="literal">nil</span>), forCellReuseIdentifier: <span class="type">TestCellID</span>)</span><br><span class="line"><span class="comment">// 4. nibå®ä¾‹åŒ–åªä¼šè°ƒç”¨</span></span><br><span class="line"><span class="keyword">override</span> <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">awakeFromNib</span>() </span>{</span><br><span class="line">    <span class="keyword">super</span>.awakeFromNib()</span><br><span class="line">    setup()</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 5. åœ¨tableView: cellForRowAtIndexPath: ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">let</span> cell <span class="operator">=</span> tableView.dequeueReusableCell(withIdentifier: <span class="type">TestCellID</span>, for: indexPath) <span class="keyword">as!</span> <span class="type">TestCell</span></span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>çº¯ä»£ç åˆ›å»ºcell</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. åˆ›å»º TestCell.swift</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestCell</span>: <span class="title">UITableViewCell</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">withTableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">UITableView</span>, <span class="params">reuseIdentifier</span>: <span class="type">String</span>? <span class="operator">=</span> <span class="literal">nil</span>)</span> -&gt; <span class="type">TestCell</span> {</span><br><span class="line">        <span class="keyword">let</span> identifier <span class="operator">=</span> reuseIdentifier <span class="operator">??</span> <span class="type">TestCell</span>.<span class="keyword">self</span>.description()</span><br><span class="line">        <span class="keyword">var</span> cell <span class="operator">=</span> tableView.dequeueReusableCell(withIdentifier: identifier) <span class="keyword">as?</span> <span class="type">TestCell</span></span><br><span class="line">        <span class="keyword">if</span> cell <span class="operator">==</span> <span class="literal">nil</span> {</span><br><span class="line">            cell <span class="operator">=</span> <span class="type">TestCell</span>(style: .default, reuseIdentifier: identifier)</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> cell<span class="operator">!</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ä½¿ç”¨nibå®ä¾‹åŒ–åªä¼šè°ƒç”¨</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">init</span>(<span class="params">style</span>: <span class="type">UITableViewCell</span>.<span class="type">CellStyle</span>, <span class="params">reuseIdentifier</span>: <span class="type">String</span>?)</span> {</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(style: style, reuseIdentifier: reuseIdentifier)</span><br><span class="line">        setup()</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="function"><span class="keyword">init?</span>(<span class="params">coder</span> <span class="params">aDecoder</span>: <span class="type">NSCoder</span>)</span> {</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(coder: aDecoder)</span><br><span class="line">        setup()</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 2. åœ¨tableView: cellForRowAtIndexPath: ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">let</span> cell <span class="operator">=</span> <span class="type">TestCell</span>.withTableView(tableView)</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>è®¾ç½®ui</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setup</span>()</span> {</span><br><span class="line">    backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>.clear</span><br><span class="line">    contentView.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>.clear</span><br><span class="line">    selectionStyle <span class="operator">=</span> .none</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="å±æ€§é—®é¢˜">å±æ€§é—®é¢˜</h3><ul><li><code>table.tableFooterView = UIView()</code> å»é™¤å¤šä½™çš„åˆ†å‰²çº¿</li><li><code>table.separatorStyle = .none</code> éšè—åˆ†å‰²çº¿</li></ul><h3 id="è‡ªå®šä¹‰xibå¤§å°æ— æ³•æ”¹å˜æ—¶">è‡ªå®šä¹‰xibå¤§å°æ— æ³•æ”¹å˜æ—¶</h3><p><code>Attributes inspector</code> -&gt; <code>Simulated metric</code>: Sizeï¼šinferred -&gt; Sizeï¼šFreeform</p><h3 id="tableviewæ˜¯å¦æ³¨å†Œcell">tableviewæ˜¯å¦æ³¨å†Œcell</h3><blockquote><p>å¦‚æœä¸æƒ³æ‰‹åŠ¨åˆå§‹åŒ–cellå®ä¾‹ï¼Œåˆ™æ³¨å†Œclass/nibï¼Œä½¿ç”¨æ³¨å†Œæ—¶éœ€è¦æºå¸¦<code>indexPath</code>å‚æ•°</p></blockquote><ol><li>åŸºäºclassçš„æ³¨å†Œï¼Œä½¿ç”¨registerClassæ–¹æ³•</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tableView.register(<span class="type">UITableViewCell</span>.<span class="keyword">self</span>, forCellReuseIdentifier: <span class="string">"identifier"</span>)</span><br><span class="line"><span class="comment">// åœ¨tableView: cellForRowAtIndexPath: ä¸­ä½¿ç”¨</span></span><br><span class="line">tableView.dequeueReusableCell(withIdentifier: <span class="string">"identifier"</span>, for: indexPath)</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>åŸºäºnibçš„æ³¨å†Œï¼Œä½¿ç”¨registerNibæ–¹æ³•</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tableView.register(<span class="type">UINib</span>(nibName: <span class="string">"TestCell"</span>, bundle: <span class="literal">nil</span>), forCellReuseIdentifier: <span class="string">"identifier"</span>)</span><br><span class="line"><span class="comment">// åœ¨tableView: cellForRowAtIndexPath: ä¸­ä½¿ç”¨</span></span><br><span class="line">tableView.dequeueReusableCell(withIdentifier: <span class="string">"identifier"</span>, for: indexPath)</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>åŸºäºclassçš„ä¸æ³¨å†Œï¼Œæ‰‹åŠ¨åˆ¤åˆ«cellæ˜¯å¦ä¸ºç©º</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨tableView: cellForRowAtIndexPath: ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">var</span> cell <span class="operator">=</span> tableView.dequeueReusableCell(withIdentifier: <span class="string">"identifier"</span>) <span class="keyword">as?</span> <span class="type">TestCell</span></span><br><span class="line"><span class="keyword">if</span> cell <span class="operator">==</span> <span class="literal">nil</span> {</span><br><span class="line">    cell <span class="operator">=</span> <span class="type">TestCell</span>(style: .default, reuseIdentifier: <span class="string">"identifier"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li>åŸºäºnibçš„ä¸æ³¨å†Œï¼Œæ‰‹åŠ¨åˆ¤åˆ«cellæ˜¯å¦ä¸ºç©º</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨tableView: cellForRowAtIndexPath: ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">var</span> cell <span class="operator">=</span> tableView.dequeueReusableCell(withIdentifier: <span class="string">"identifier"</span>) <span class="keyword">as?</span> <span class="type">TestCell</span></span><br><span class="line"><span class="keyword">if</span> cell <span class="operator">==</span> <span class="literal">nil</span> {</span><br><span class="line">    cell <span class="operator">=</span> <span class="type">Bundle</span>.main.loadNibNamed(<span class="string">"TestCell"</span>, owner: <span class="keyword">self</span>, options: <span class="literal">nil</span>)<span class="operator">?</span>.last <span class="keyword">as?</span> <span class="type">TestCell</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="TableViewCellçš„æ€§èƒ½ä¼˜åŒ–">TableViewCellçš„æ€§èƒ½ä¼˜åŒ–</h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¦»å±æ¸²æŸ“ - å¼‚æ­¥ç»˜åˆ¶</span></span><br><span class="line"><span class="keyword">self</span>.layer.drawsAsynchronously <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">// æ …æ ¼åŒ– - å¼‚æ­¥ç»˜åˆ¶ä¹‹åï¼Œä¼šç”Ÿæˆä¸€å¼ ç‹¬ç«‹çš„å›¾åƒï¼Œcellåœ¨æ»šåŠ¨çš„æ—¶å€™ï¼Œæœ¬è´¨ä¸Šæ»šåŠ¨çš„æ˜¯è¿™å¼ å›¾ç‰‡</span></span><br><span class="line"><span class="comment">// cellä¼˜åŒ–ï¼Œè¦å°½é‡å‡å°‘å›¾å±‚æ•°é‡ï¼Œç›¸å½“äºå°±åªæœ‰ä¸€å±‚</span></span><br><span class="line"><span class="comment">// åœæ­¢æ»šåŠ¨ä¹‹åï¼Œå¯ä»¥ç›‘å¬</span></span><br><span class="line"><span class="keyword">self</span>.layer.shouldRasterize <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ â€™çŠæ ¼åŒ–â€˜éœ€è¦æŒ‡å®šåˆ†è¾¨ç‡ï¼Œå¦åˆ™å›¾åƒä¸æ¸…æ™°</span></span><br><span class="line"><span class="keyword">self</span>.layer.rasterizationScale <span class="operator">=</span> <span class="type">UIScreen</span>.main.scale</span><br></pre></td></tr></tbody></table></figure><ul><li>ä¼˜ç‚¹ï¼šç»˜åˆ¶cellæ›´å¿«ï¼Œæ›´é«˜æ•ˆ</li><li>ç¼ºç‚¹ï¼šç¦»å±æ¸²æŸ“éœ€è¦åœ¨ GPUï¼CPU ä¹‹é—´å¿«é€Ÿåˆ‡æ¢<br>æ›´åŠ è€—ç”µ</li></ul><h3 id="å…³é—­å¯¼èˆªæ è‡ªåŠ¨ç¼©è¿›">å…³é—­å¯¼èˆªæ è‡ªåŠ¨ç¼©è¿›</h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">#available</span>(<span class="keyword">iOS</span> <span class="number">11.0</span>, <span class="operator">*</span>) {</span><br><span class="line">    scroll.contentInsetAdjustmentBehavior <span class="operator">=</span> .never</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    automaticallyAdjustsScrollViewInsets <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="TableViewCell-è®¾ç½®é—´è·ï¼Œå»é™¤é¡¶éƒ¨é—´è·">TableViewCell è®¾ç½®é—´è·ï¼Œå»é™¤é¡¶éƒ¨é—´è·</h3><ol><li>tableview åˆå§‹åŒ–<code>estimated</code>å¿…é¡»åœ¨viewè®¾ç½®ä¹‹å‰</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> table <span class="operator">=</span> <span class="type">UITableView</span>(frame: .zero, style: .grouped)</span><br><span class="line">table.estimatedSectionHeaderHeight <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">table.estimatedSectionFooterHeight <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">table.tableFooterView <span class="operator">=</span> <span class="type">UIView</span>()</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>ä»£ç†è®¾ç½®é—´è·</li></ol><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">UITableView</span>, <span class="params">heightForHeaderInSection</span> <span class="params">section</span>: <span class="type">Int</span>)</span> -&gt; <span class="type">CGFloat</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.1</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">UITableView</span>, <span class="params">heightForFooterInSection</span> <span class="params">section</span>: <span class="type">Int</span>)</span> -&gt; <span class="type">CGFloat</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="tableview-å…³é—­å»¶æ—¶ç‚¹å‡»">tableview å…³é—­å»¶æ—¶ç‚¹å‡»</h3><blockquote><p>table.delaysContentTouches = false</p></blockquote><h3 id="UIScrollView-è‡ªåŠ¨å¸ƒå±€çº¦æŸæ»šåŠ¨">UIScrollView è‡ªåŠ¨å¸ƒå±€çº¦æŸæ»šåŠ¨</h3><ol><li><p>æ·»åŠ ä¸€ä¸ªscroll view</p></li><li><p>åƒæ™®é€šè§†å›¾ä¸€æ ·ä¸ºscroll viewæ·»åŠ ä½ç½®å’Œå¤§å°çš„çº¦æŸ</p></li><li><p>åœ¨scroll viewä¸­æ·»åŠ ä¸€ä¸ªå­è§†å›¾ï¼ˆcontent viewï¼‰ï¼Œç»™è¯¥è§†å›¾æ·»åŠ ä¸€ä¸ªæŒ‡å®šçš„æ ‡ç­¾ï¼ˆè¿™ä¸ªæ ‡ç­¾åªæ˜¯ä¸ºäº†æ›´å¥½åœ°æ˜¾ç¤ºï¼‰</p></li><li><p>å°†content viewçš„leftï¼Œrightï¼Œtopï¼Œbottomå’Œscroll viewçš„è¾¹ç•Œå»ºç«‹ç›¸ç­‰çº¦æŸã€‚é‚£ä¹ˆç°åœ¨content viewçš„è¾¹ç•Œå°±ç¡®å®šäº†scroll viewçš„å†…å®¹åŒºåŸŸ</p></li></ol><blockquote><p>ï¼ˆæ³¨æ„æ­¤æ—¶content viewè¿˜æ²¡æœ‰å›ºå®šçš„å¤§å°ï¼Œå®ƒå¯ä»¥æ ¹æ®ä½ åœ¨å…¶ä¸­è®¾ç½®çš„è§†å›¾çš„ä¼¸ç¼©å¤§å°ï¼‰</p></blockquote><ol start="5"><li><p>ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸éœ€è¦æ°´å¹³æ»‘åŠ¨ï¼Œå°†content viewçš„å®½åº¦è®¾ç½®ä¸ºå’Œscoll viewçš„å®½åº¦ç›¸ç­‰ã€‚</p></li><li><p>ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸éœ€è¦å‚ç›´æ»‘åŠ¨ï¼Œå°†content viewçš„é«˜åº¦è®¾ç½®ä¸ºå’Œscroll viewçš„é«˜åº¦ç›¸ç­‰ã€‚</p></li></ol><p>åœ¨content viewä¸­æ·»åŠ å­è§†å›¾ï¼Œä¸ºå­è§†å›¾å’Œcontent viewæ·»åŠ çº¦æŸã€‚</p><p>é‡è¦ï¼š ä½ çš„å¸ƒå±€å¿…é¡»èƒ½å¤Ÿå†³å®šcontent viewçš„å¤§å°ï¼ˆé™¤éåœ¨5å’Œ6ä¸­å·²ç»è®¾ç½®è¿‡äº†ï¼‰ã€‚å¦‚æœè¦åŸºäºä½ çš„å†…å®¹çš„å›ºæœ‰å°ºå¯¸æ¥å†³å®šé«˜åº¦ï¼Œé‚£ä¹ˆåœ¨<em><strong>content viewçš„topè·Ÿbottomä¹‹é—´å¿…é¡»æœ‰ä¸€æ¡ä¸é—´æ–­çš„çº¦æŸé“¾</strong></em>ã€‚ç±»ä¼¼åœ°ï¼Œå¯¹äºå®½åº¦ï¼Œå¿…é¡»è¦åœ¨leftå’Œrighté—´æœ‰ä¸é—´æ–­çš„çº¦æŸé“¾ã€‚å¦‚æœä½ åœ¨content viewä¸­æ·»åŠ çš„å†…å®¹ï¼ˆå­è§†å›¾ï¼‰ä¸å…·æœ‰å›ºæœ‰å°ºå¯¸ï¼Œé‚£ä¹ˆä½ è¦æ˜¾å¼åœ°ä¸ºcontent viewæˆ–è€…å…¶å†…å®¹ç¡®å®šå¥½åˆé€‚çš„å°ºå¯¸ã€‚å½“content viewçš„é«˜åº¦å¤§äºscroll viewçš„é«˜åº¦ï¼Œé‚£ä¹ˆscroll viewæ”¯æŒå‚ç›´æ–¹å‘çš„æ»‘åŠ¨ã€‚å½“content viewçš„å®½åº¦å¤§äºscroll viewçš„å®½åº¦ï¼Œé‚£ä¹ˆscoll viewæ”¯æŒæ°´å¹³æ–¹å‘ä¸Šçš„æ»‘åŠ¨ã€‚å¦åˆ™ï¼Œé»˜è®¤æ»‘åŠ¨æ˜¯è¢«ç¦æ­¢çš„ã€‚</p><h3 id="iOS-UITableViewCell-ä¸­-è°ƒæ•´imageView-çš„å›¾ç‰‡å¤§å°">iOS UITableViewCell ä¸­ è°ƒæ•´imageView çš„å›¾ç‰‡å¤§å°</h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">UITableView</span>, <span class="params">cellForRowAt</span> <span class="params">indexPath</span>: <span class="type">IndexPath</span>)</span> -&gt; <span class="type">UITableViewCell</span> {</span><br><span class="line">        <span class="operator">...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¿®æ”¹imageå¤§å° âš ï¸è‹¥æ˜¯ç½‘ç»œå›¾ç‰‡å¿…é¡»åœ¨å›¾ç‰‡åŠ è½½å®Œæˆåå†ä¸€æ¬¡è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">let</span> itemSize <span class="operator">=</span> <span class="type">CGSize</span>(width: <span class="number">50</span>, height: <span class="number">50</span>)</span><br><span class="line">        <span class="type">UIGraphicsBeginImageContextWithOptions</span>(itemSize, <span class="keyword">_</span>: <span class="literal">false</span>, <span class="keyword">_</span>: <span class="type">UIScreen</span>.main.scale)</span><br><span class="line">        <span class="keyword">let</span> imageRect <span class="operator">=</span> <span class="type">CGRect</span>(x: <span class="number">0.0</span>, y: <span class="number">0.0</span>, width: itemSize.width, height: itemSize.height)</span><br><span class="line">        cell.imageView<span class="operator">?</span>.image<span class="operator">?</span>.draw(in: imageRect)</span><br><span class="line">        cell.imageView<span class="operator">?</span>.image <span class="operator">=</span> <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</span><br><span class="line">        <span class="type">UIGraphicsEndImageContext</span>()</span><br><span class="line">        <span class="keyword">return</span> cell</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h3 id="UITableViewCellçš„åˆ†å‰²çº¿è¾¹è·è®¾ç½®">UITableViewCellçš„åˆ†å‰²çº¿è¾¹è·è®¾ç½®</h3><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">UITableView</span>, <span class="params">willDisplay</span> <span class="params">cell</span>: <span class="type">UITableViewCell</span>, <span class="params">forRowAt</span> <span class="params">indexPath</span>: <span class="type">IndexPath</span>)</span> {</span><br><span class="line">    <span class="keyword">if</span> cell.responds(to: #selector(setter: <span class="type">UITableView</span>.separatorInset)) {</span><br><span class="line">        cell.separatorInset <span class="operator">=</span> <span class="type">UIEdgeInsets</span>(top: <span class="number">0</span>, left: <span class="number">75</span>, bottom: <span class="number">0</span>, right: <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> indexPath.row <span class="operator">==</span> (conversationModel.dataList.count <span class="operator">-</span> <span class="number">1</span>) {</span><br><span class="line">            cell.separatorInset <span class="operator">=</span> .zero</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// responds(to: selector) åˆ¤æ–­æ˜¯å¦å“åº”Selector</span></span><br><span class="line"><span class="comment">// perform(selector, with: target) è°ƒç”¨Selectorå¹¶ä¼ é€’ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br></pre></td></tr></tbody></table></figure><h1>ä¸Šæ¶</h1><h2 id="å¤‡æ³¨è¯´æ˜">å¤‡æ³¨è¯´æ˜</h2><ol><li>å¦‚æœæœ‰ä½¿ç”¨<code>VoIP</code>ï¼Œéœ€è¦æä¾›æ¼”ç¤ºè§†é¢‘è¯´æ˜</li><li>å¦‚æœæœ‰ä½¿ç”¨<code>å®šä½/åå°</code>ç›¸å…³åŠŸèƒ½ï¼Œä¹Ÿéœ€è¦è§†é¢‘æ¼”ç¤º</li><li>å¦‚æœæœ‰å†…è´­ï¼Œéœ€è¦æä¾›å†…è´­è´¦å·å¯†ç ï¼Œå¹¶åŠ ä»¥æè¿°<code>CNY 699å…ƒ æ˜¯è´­ä¹°684é‡‘å¸</code></li><li>è‹¹æœç™»é™†éœ€è¦ç›´æ¥ç‚¹å‡»å°±å¯ä»¥ä½¿ç”¨appï¼›è‹¥éœ€è¦ç”¨æˆ·å®Œå–„ä¿¡æ¯çš„ï¼Œåˆ™éœ€è¦æä¾›èƒ½å®Œæ•´ä½¿ç”¨åŠŸèƒ½çš„æµ‹è¯•è´¦å·</li><li>æœ‰é‡‘å¸ç­‰äº¤æ˜“ç›¸å…³çš„å•†å“ï¼Œéœ€è¦åŠ å…¥å†…è´­ï¼›å¯ä»¥åªæä¾›ä¸¤ä¸ªä»·æ ¼ï¼Œä¸€ä¸ªæœ€ä½ï¼Œä¸€ä¸ªæœ€é«˜</li></ol><hr><p><strong>æ³¨ï¼šä»¥ä¸Šè§†é¢‘éœ€è¦æ‹¼æ¥ä¸ºä¸€ä¸ªï¼Œä»¥é™„ä»¶å½¢å¼ä¸Šä¼ ï¼Œæœ€å¥½200Mä»¥å†…</strong></p><h2 id="Regarding-Guideline-1-2-Safety-User-Generated-Content">Regarding Guideline 1.2 - Safety - User Generated Content</h2><p>åé¦ˆæè¿°ï¼š</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹äºç”¨æˆ·ä¸Šä¼ çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æœ‰æœåŠ¡ç«¯çš„æ•°æ®é£æ§ç­–ç•¥ï¼Œä¼šè‡ªåŠ¨éšè—/å°é—­ç”¨æˆ·æ•°æ®ï¼Œ ä¸éœ€è¦åšæ‹‰é»‘æè¿°ç­‰</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœappå†…éƒ¨æœ‰æŠ•è¯‰/ä¸¾æŠ¥ç›¸å…³åŠŸèƒ½ï¼Œæœ€å¥½æä¾›æ¼”ç¤ºè§†é¢‘ä»¥è¯´æ˜</p><h2 id="xcode-æ„å»ºç‰ˆæœ¬è¢«åˆ é™¤">xcode æ„å»ºç‰ˆæœ¬è¢«åˆ é™¤</h2><ol><li>éšç§æƒé™æ²¡æœ‰åœ¨info.plisté‡Œè¿›è¡Œå£°æ˜ï¼ˆâš ï¸æŸ¥æ”¶appleidé‚®ç®±é‚®ä»¶</li><li>ä½¿ç”¨äº†Appleç¦æ­¢ä½¿ç”¨çš„API</li><li>é‡æ–°ç”Ÿæˆæ‰“åŒ…è¯ä¹¦ï¼Œretry!</li></ol>]]></content>
      
      
      <categories>
          
          <category> dev </category>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
